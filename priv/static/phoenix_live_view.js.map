{"version":3,"sources":["webpack://phoenix_live_view/webpack/universalModuleDefinition","webpack://phoenix_live_view/webpack/bootstrap","webpack://phoenix_live_view/./src/constants.ts","webpack://phoenix_live_view/./src/util.ts","webpack://phoenix_live_view/./src/dom.ts","webpack://phoenix_live_view/./src/browser.ts","webpack://phoenix_live_view/./src/rendered.ts","webpack://phoenix_live_view/./src/view.ts","webpack://phoenix_live_view/./node_modules/morphdom/dist/morphdom-esm.js","webpack://phoenix_live_view/./src/phoenix_live_view.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","w","s","CONSECUTIVE_RELOADS","MAX_RELOADS","RELOAD_JITTER","FAILSAFE_JITTER","PHX_VIEW","PHX_EVENT_CLASSES","PHX_COMPONENT","PHX_LIVE_LINK","PHX_LINK_STATE","PHX_REF","PHX_SKIP","PHX_REMOVE","PHX_PAGE_LOADING","PHX_CONNECTED_CLASS","PHX_DISCONNECTED_CLASS","PHX_NO_FEEDBACK_CLASS","PHX_ERROR_CLASS","PHX_PARENT_ID","PHX_VIEW_SELECTOR","PHX_MAIN","PHX_ROOT_ID","PHX_TRIGGER_ACTION","PHX_FEEDBACK_FOR","PHX_HAS_FOCUSED","FOCUSABLE_INPUTS","CHECKABLE_INPUTS","PHX_HAS_SUBMITTED","PHX_SESSION","PHX_STATIC","PHX_READONLY","PHX_DISABLED","PHX_DISABLE_WITH","PHX_DISABLE_WITH_RESTORE","PHX_HOOK","PHX_DEBOUNCE","PHX_THROTTLE","PHX_CHANGE_EVENT","PHX_UPDATE","PHX_KEY","PHX_PRIVATE","PHX_AUTO_RECOVER","PHX_LV_DEBUG","PHX_LV_PROFILE","PHX_LV_LATENCY_SIM","LOADER_TIMEOUT","BEFORE_UNLOAD_LOADER_TIMEOUT","BINDING_PREFIX","PUSH_TIMEOUT","LINK_HEADER","DEBOUNCE_BLUR","DEBOUNCE_TIMER","DEBOUNCE_BLUR_TIMER","DEBOUNCE_PREV_KEY","DEFAULTS","debounce","throttle","DYNAMICS","STATIC","COMPONENTS","constants_1","logError","msg","obj","console","error","closure","val","clone","JSON","parse","stringify","detectDuplicateIds","ids","Set","elems","document","querySelectorAll","len","length","has","id","add","maybe","el","callback","isObject","Array","isEqualObj","obj1","obj2","isEmpty","keys","serializeForm","form","meta","formData","FormData","params","URLSearchParams","_b","__values","entries","_c","next","done","_d","__read","key","append","toString","metaKey","closestPhxBinding","binding","borderEl","matches","parentElement","parentNode","nodeType","isSameNode","morphdom_1","__importDefault","util_1","DOM","byId","getElementById","removeClass","className","classList","remove","removeAttribute","all","node","query","from","each","forEach","findFirstComponentNode","cid","querySelector","findComponentNodeList","findPhxChildrenInFragment","html","parentId","template","createElement","innerHTML","findPhxChildren","content","isPhxUpdate","phxUpdate","updateTypes","getAttribute","indexOf","findParentCIDs","cids","_this","initial","reduce","acc","selector","map","parseInt","childCID","delete","private","deletePrivate","putPrivate","copyPrivates","target","source","putTitle","str","_a","dataset","prefix","suffix","title","event","phxDebounce","defaultDebounce","phxThrottle","defaultThrottle","addEventListener","timeout","isNaN","type","prevKey","clearTimer_1","e","detail","triggeredBy","clearTimeout","debounceCallback_1","removeEventListener","blurCallback","setTimeout","discardError","container","phxFeedbackFor","field","input","isPhxChild","dispatchEvent","eventString","CustomEvent","bubbles","cancelable","cloneNode","cloned","mergeAttrs","exclude","sourceAttrs","attributes","name_1","setAttribute","targetAttrs","name_2","hasAttribute","mergeFocusedInput","HTMLSelectElement","readOnly","restoreFocus","focused","selectionStart","selectionEnd","isTextualInput","wasFocused","blur","focus","setSelectionRange","isFormInput","test","tagName","syncAttrsToProps","HTMLInputElement","toLocaleLowerCase","checked","isNowTriggerFormExternal","phxTriggerExternal","undoRefs","ref","syncPendingRef","fromEl","toEl","fromRefAttr","fromRef","disabled","disableRestore","innerText","contains","DOMPatch","view","targetCID","liveSocket","rootID","cidPatch","callbacks","beforeadded","beforeupdated","beforediscarded","beforephxChildAdded","afteradded","afterupdated","afterdiscarded","afterphxChildAdded","before","kind","push","after","trackBefore","args","_i","arguments","apply","__spread","trackAfter","markPrunableContentForRemoval","perform","targetContainer","isCIDPatch","targetCIDContainer","getActiveElement","added","updates","appendPrependUpdates","diffHTML","time","buildDiffHTML","default","childrenOnly","onBeforeNodeAdded","onNodeAdded","submit","ownsElement","onNodeDiscarded","onBeforeNodeDiscarded","skipCIDSibling","destroyViewByEl","onElUpdated","onBeforeElUpdated","validity","badInput","prevStatic","forceFocusedSelectUpdate","isAppend","idsBefore_1","children","child","newIds","find","isDebugEnabled","containerID","idsBefore","reverse","insertBefore","firstChild","appendChild","silenceEvents","multiple","Node","ELEMENT_NODE","first","slice","isCIDWithSingleRoot","diffContainer_1","firstComponent_1","rest","childNodes","outerHTML","Browser","canPushState","history","pushState","dropLocal","namespace","subkey","window","localStorage","removeItem","localKey","updateLocal","func","current","getLocal","newVal","setItem","getItem","fetchPage","href","req","XMLHttpRequest","open","setRequestHeader","onerror","ontimeout","onreadystatechange","readyState","getResponseHeader","status","responseText","send","to","location","hashEl","getHashTargetEl","hash","scrollIntoView","scroll","redirect","setCookie","cookie","getCookie","replace","RegExp","toURL","flash","substring","Rendered","viewId","rendered","replaceRendered","parentViewId","onlyCids","recursiveToString","components","output","buffer","toOutputBuffer","componentCIDs","diff","isComponentOnlyDiff","filter","k","mergeDiff","isNewFingerprint","recursiveMerge","targetVal","componentToString","recursiveCIDToString","pruneCIDs","comprehensionToBuffer","statics","dynamicToBuffer","dynamics","dynamic","component","skip","nodeValue","trim","span","replaceWith","dom_1","browser_1","rendered_1","View","parentView","parent","childJoins","loaderTimer","pendingDiffs","joinCount","joinPending","destroyed","joinCallback","stopCallback","pendingJoinOps","viewHooks","channel","url","session","getSession","static","getStatic","joins","showLoader","loaderTimeout","bindChannel","isMain","main","isConnected","canPush","destroy","destroyAllChildren","onFinished","destroyHook","log","leave","receive","setContainerClasses","classes","isLoading","__trigger__","hideLoader","triggerReconnected","msgCallback","onJoin","resp","renderContainer","dropPendingRefs","forms","formsForRecovery","pushFormRecovery","onJoinComplete","live_patch","isJoinPending","applyJoinPatch","joinChild","ackJoin","onAllChildJoinsComplete","attachTrueDocEl","patch","performPatch","joinNewChildren","hookEl","hook","addHook","applyPendingUpdates","historyPatch","destroyedCIDs","phxChildrenAdded","updatedHookIds","newHook","getHook","isIgnored","isEqualNode","componentID","maybePushComponentsDestroyed","getChildById","getDescendentByEl","destroyDescendent","childId","join","_child","op","isDestroyed","update","cidAck","hasPendingLink","componentPatch","parentCID","tag","ViewHook","elementID","hookName","getHookCallbacks","onChannel","cb","onRedirect","redir","onLivePatch","onLiveRedirect","token","onError","reason","onClose","expandURL","historyRedirect","startsWith","protocol","host","withPageLoading","wrapPush","data","onJoinError","live_redirect","reloadWithJitter","onViewError","activeElement","isUnloaded","displayError","pushWithReply","refGenerator","payload","onReply","_resp","onLoadingDone","putRef","elements","newRef","disableWith","String","disableText","targetComponentID","targetCtx","closestComponentID","closest","pushHookEvent","extractMeta","undefined","pushEvent","phxEvent","pushKey","keyElement","pushInput","inputEl","eventTarget","_target","pushFormSubmit","formEl","filterIgnored","disables","buttons","inputs","button","concat","withinOwners","pushLinkPatch","targetEl","linkRef","setPendingLink","refGen","link_redirect","replaceMain","commitPendingLink","phxChange","completelyDestroyedCIDs","submitForm","blurActiveElement","restorePreviouslyActiveFocus","viewHookID","__view","__liveSocket","__callbacks","viewName","phxHookId","makeID","pushEventTo","phxTarget","withinTargets","__webpack_exports__","range","DOCUMENT_FRAGMENT_NODE","NS_XHTML","doc","HAS_TEMPLATE_SUPPORT","HAS_RANGE_SUPPORT","createRange","toElement","createFragmentFromTemplate","selectNode","body","createContextualFragment","createFragmentFromRange","fragment","createFragmentFromWrap","compareNodeNames","fromNodeName","nodeName","toNodeName","actualize","charCodeAt","toUpperCase","syncBooleanAttrProp","specialElHandlers","OPTION","parentName","selected","selectedIndex","INPUT","TEXTAREA","newValue","oldValue","placeholder","SELECT","optgroup","curChild","nextSibling","DOCUMENT_FRAGMENT_NODE$1","TEXT_NODE","COMMENT_NODE","noop","defaultGetNodeKey","morphdom","morphAttrs","fromNode","toNode","options","toNodeHtml","getNodeKey","onBeforeElChildrenUpdated","fromNodesLookup","create","keyedRemovalList","addKeyedRemoval","removeNode","skipKeyedNodes","removeChild","walkDiscardedChildNodes","handleNodeAdded","unmatchedFromEl","replaceChild","morphEl","toElKey","curToNodeKey","curFromNodeKey","fromNextSibling","toNextSibling","matchingFromEl","curToNodeChild","curFromNodeChild","outer","curFromNodeType","isCompatible","onBeforeNodeAddedResult","ownerDocument","cleanupFromEl","specialElHandler","morphChildren","indexTree","morphedNode","morphedNodeType","toNodeType","nextChild","moveChildren","namespaceURI","createElementNS","elToRemove","morphdomFactory","attr","attrName","attrNamespaceURI","attrValue","toNodeAttrs","localName","getAttributeNS","setAttributeNS","fromNodeAttrs","hasAttributeNS","removeAttributeNS","view_1","debug","LiveSocket","phxSocket","opts","bindingPrefix","viewLogger","defaults","hooks","unloaded","constructor","Error","socket","assign","prevActive","silenced","roots","pendingLink","currentLocation","onOpen","destroyAllViews","joinRootViews","isProfileEnabled","sessionStorage","enableDebug","enableProfiling","disableDebug","disableProfiling","enableLatencySim","upperBoundMs","disableLatencySim","getLatencySim","getSocket","connect","doConnect","bindTopLevelEvents","disconnect","result","timeEnd","on","latency","fakePush","receives","minMs","maxMs","afterMs","Math","floor","random","tries","count","reload","getBindingPrefix","topic","rootsFound","rootEl","joinRootView","getHref","mainEl","isPhxView","newMain","owner","childEl","getViewByEl","myselfTarget_1","targets","rootId","getRootById","dropActiveElement","setActiveElement","cancel","bindClicks","bindNav","bindForms","bind","keyup","keydown","_phxTarget","matchKey","toLowerCase","altGraphKey","altKey","code","ctrlKey","keyIdentifier","keyLocation","repeat","shiftKey","events","browserEventName","windowBinding","targetPhxEvent","capture","click","preventDefault","x","clientX","y","clientY","pageX","pageY","screenX","screenY","offsetX","offsetY","onpopstate","registerNewLocation","state","replaceRootHistory","wantsNewTab","linkState","pushHistoryPatch","info","newLocation","pathname","search","iterations","this_1","currentIterations","at","lastType"],"mappings":"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","file":"phoenix_live_view.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"phoenix_live_view\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"phoenix_live_view\"] = factory();\n\telse\n\t\troot[\"phoenix_live_view\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all compiled WebAssmbly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","export const CONSECUTIVE_RELOADS = \"consecutive-reloads\";\nexport const MAX_RELOADS = 10;\nexport const RELOAD_JITTER = [1000, 3000];\nexport const FAILSAFE_JITTER = 30000;\nexport const PHX_VIEW = \"data-phx-view\";\nexport const PHX_EVENT_CLASSES = [\n  \"phx-click-loading\",\n  \"phx-change-loading\",\n  \"phx-submit-loading\",\n  \"phx-keydown-loading\",\n  \"phx-keyup-loading\",\n  \"phx-blur-loading\",\n  \"phx-focus-loading\",\n];\nexport const PHX_COMPONENT = \"data-phx-component\";\nexport const PHX_LIVE_LINK = \"data-phx-link\";\nexport const PHX_LINK_STATE = \"data-phx-link-state\";\nexport const PHX_REF = \"data-phx-ref\";\nexport const PHX_SKIP = \"data-phx-skip\";\nexport const PHX_REMOVE = \"data-phx-remove\";\nexport const PHX_PAGE_LOADING = \"page-loading\";\nexport const PHX_CONNECTED_CLASS = \"phx-connected\";\nexport const PHX_DISCONNECTED_CLASS = \"phx-disconnected\";\nexport const PHX_NO_FEEDBACK_CLASS = \"phx-no-feedback\";\nexport const PHX_ERROR_CLASS = \"phx-error\";\nexport const PHX_PARENT_ID = \"data-phx-parent-id\";\nexport const PHX_VIEW_SELECTOR = `[${PHX_VIEW}]`;\nexport const PHX_MAIN = `data-phx-main`;\nexport const PHX_ROOT_ID = `data-phx-root-id`;\nexport const PHX_TRIGGER_ACTION = \"trigger-action\";\nexport const PHX_FEEDBACK_FOR = \"feedback-for\";\nexport const PHX_HAS_FOCUSED = \"phx-has-focused\";\nexport const FOCUSABLE_INPUTS = [\n  \"text\",\n  \"textarea\",\n  \"number\",\n  \"email\",\n  \"password\",\n  \"search\",\n  \"tel\",\n  \"url\",\n  \"date\",\n  \"time\",\n];\nexport const CHECKABLE_INPUTS = [\"checkbox\", \"radio\"];\nexport const PHX_HAS_SUBMITTED = \"phx-has-submitted\";\nexport const PHX_SESSION = \"data-phx-session\";\nexport const PHX_STATIC = \"data-phx-static\";\nexport const PHX_READONLY = \"data-phx-readonly\";\nexport const PHX_DISABLED = \"data-phx-disabled\";\nexport const PHX_DISABLE_WITH = \"disable-with\";\nexport const PHX_DISABLE_WITH_RESTORE = \"data-phx-disable-with-restore\";\nexport const PHX_HOOK = \"hook\";\nexport const PHX_DEBOUNCE = \"debounce\";\nexport const PHX_THROTTLE = \"throttle\";\nexport const PHX_CHANGE_EVENT = \"phx-change\";\nexport const PHX_UPDATE = \"update\";\nexport const PHX_KEY = \"key\";\nexport const PHX_PRIVATE = \"phxPrivate\";\nexport const PHX_AUTO_RECOVER = \"auto-recover\";\nexport const PHX_LV_DEBUG = \"phx:live-socket:debug\";\nexport const PHX_LV_PROFILE = \"phx:live-socket:profiling\";\nexport const PHX_LV_LATENCY_SIM = \"phx:live-socket:latency-sim\";\nexport const LOADER_TIMEOUT = 1;\nexport const BEFORE_UNLOAD_LOADER_TIMEOUT = 200;\nexport const BINDING_PREFIX = \"phx-\";\nexport const PUSH_TIMEOUT = 30000;\nexport const LINK_HEADER = \"x-requested-with\";\nexport const DEBOUNCE_BLUR = \"debounce-blur\";\nexport const DEBOUNCE_TIMER = \"debounce-timer\";\nexport const DEBOUNCE_BLUR_TIMER = \"debounce-blur-timer\";\nexport const DEBOUNCE_PREV_KEY = \"debounce-prev-key\";\nexport const DEFAULTS = {\n  debounce: 300,\n  throttle: 300,\n};\n\n// Rendered\nexport const DYNAMICS = \"d\";\nexport const STATIC = \"s\";\nexport const COMPONENTS = \"c\";\n","import { PHX_VIEW_SELECTOR } from \"./constants\";\n\nexport const logError = (msg, obj?) => {\n  console.error && console.error(msg, obj);\n  return undefined;\n};\n\n// wraps value in closure or returns closure\nexport const closure = (val) =>\n  typeof val === \"function\"\n    ? val\n    : function () {\n        return val;\n      };\n\nexport const clone = (obj) => {\n  return JSON.parse(JSON.stringify(obj));\n};\n\nexport function detectDuplicateIds() {\n  const ids = new Set();\n  const elems = document.querySelectorAll(\"*[id]\");\n  for (let i = 0, len = elems.length; i < len; i++) {\n    if (ids.has(elems[i].id)) {\n      console.error(\n        `Multiple IDs detected: ${elems[i].id}. Ensure unique element ids.`\n      );\n    } else {\n      ids.add(elems[i].id);\n    }\n  }\n}\n\nexport const maybe = (el, callback) => el && callback(el);\n\nexport const isObject = (obj) => {\n  return obj !== null && typeof obj === \"object\" && !(obj instanceof Array);\n};\n\nexport const isEqualObj = (obj1, obj2) =>\n  JSON.stringify(obj1) === JSON.stringify(obj2);\n\nexport const isEmpty = (obj) => {\n  return Object.keys(obj).length == 0;\n};\n\nexport const serializeForm = (form, meta = {}) => {\n  const formData: FormData = new FormData(form);\n  const params = new URLSearchParams();\n  for (const [key, val] of formData.entries()) {\n    params.append(key, val.toString());\n  }\n  for (const metaKey in meta) {\n    params.append(metaKey, meta[metaKey]);\n  }\n\n  return params.toString();\n};\n\nexport const closestPhxBinding = (el, binding, borderEl?) => {\n  do {\n    if (el.matches(`[${binding}]`)) {\n      return el;\n    }\n    el = el.parentElement || el.parentNode;\n  } while (\n    el !== null &&\n    el.nodeType === 1 &&\n    !((borderEl && borderEl.isSameNode(el)) || el.matches(PHX_VIEW_SELECTOR))\n  );\n  return null;\n};\n","import {\n  DEBOUNCE_BLUR,\n  DEBOUNCE_BLUR_TIMER,\n  DEBOUNCE_PREV_KEY,\n  DEBOUNCE_TIMER,\n  PHX_CHANGE_EVENT,\n  PHX_COMPONENT,\n  PHX_HAS_FOCUSED,\n  PHX_HAS_SUBMITTED,\n  PHX_PARENT_ID,\n  PHX_PRIVATE,\n  PHX_ROOT_ID,\n  PHX_SKIP,\n  PHX_VIEW_SELECTOR,\n  PHX_NO_FEEDBACK_CLASS,\n  CHECKABLE_INPUTS,\n  FOCUSABLE_INPUTS,\n  PHX_REF,\n  PHX_READONLY,\n  PHX_DISABLED,\n  PHX_EVENT_CLASSES,\n  PHX_DISABLE_WITH_RESTORE,\n  PHX_REMOVE,\n  PHX_TRIGGER_ACTION,\n  PHX_UPDATE,\n  PHX_FEEDBACK_FOR,\n  PHX_STATIC,\n} from \"./constants\";\nimport morphdom from \"morphdom\";\nimport { clone, detectDuplicateIds, logError, maybe } from \"./util\";\nimport { Socket } from \"phoenix\";\n\nexport const DOM = {\n  byId(id) {\n    return document.getElementById(id) || logError(`no id found for ${id}`);\n  },\n\n  removeClass(el, className) {\n    el.classList.remove(className);\n    if (el.classList.length === 0) {\n      el.removeAttribute(\"class\");\n    }\n  },\n\n  all(node, query): HTMLElement[] {\n    return Array.from(node.querySelectorAll(query));\n  },\n\n  each(node, query, callback) {\n    this.all(node, query).forEach(callback);\n  },\n\n  findFirstComponentNode(node, cid) {\n    return node.querySelector(`[${PHX_COMPONENT}=\"${cid}\"]`);\n  },\n\n  findComponentNodeList(node, cid) {\n    return this.all(node, `[${PHX_COMPONENT}=\"${cid}\"]`);\n  },\n\n  findPhxChildrenInFragment(html, parentId) {\n    const template = document.createElement(\"template\");\n    template.innerHTML = html;\n    return this.findPhxChildren(template.content, parentId);\n  },\n\n  isPhxUpdate(el, phxUpdate, updateTypes) {\n    return (\n      el.getAttribute && updateTypes.indexOf(el.getAttribute(phxUpdate)) >= 0\n    );\n  },\n\n  findPhxChildren(el, parentId) {\n    return this.all(el, `${PHX_VIEW_SELECTOR}[${PHX_PARENT_ID}=\"${parentId}\"]`);\n  },\n\n  findParentCIDs(node, cids) {\n    const initial = new Set(cids);\n    return cids.reduce((acc, cid) => {\n      const selector = `[${PHX_COMPONENT}=\"${cid}\"] [${PHX_COMPONENT}]`;\n      this.all(node, selector)\n        .map((el) => parseInt(el.getAttribute(PHX_COMPONENT)))\n        .forEach((childCID) => acc.delete(childCID));\n\n      return acc;\n    }, initial);\n  },\n\n  private(el, key) {\n    return el[PHX_PRIVATE] && el[PHX_PRIVATE][key];\n  },\n\n  deletePrivate(el, key) {\n    el[PHX_PRIVATE] && delete el[PHX_PRIVATE][key];\n  },\n\n  putPrivate(el, key, value) {\n    if (!el[PHX_PRIVATE]) {\n      el[PHX_PRIVATE] = {};\n    }\n    el[PHX_PRIVATE][key] = value;\n  },\n\n  copyPrivates(target, source) {\n    if (source[PHX_PRIVATE]) {\n      target[PHX_PRIVATE] = clone(source[PHX_PRIVATE]);\n    }\n  },\n\n  putTitle(str) {\n    const titleEl = document.querySelector(\"title\");\n    const { prefix, suffix } = titleEl.dataset;\n    document.title = `${prefix || \"\"}${str}${suffix || \"\"}`;\n  },\n\n  debounce(\n    el,\n    event,\n    phxDebounce,\n    defaultDebounce,\n    phxThrottle,\n    defaultThrottle,\n    callback\n  ) {\n    let debounce = el.getAttribute(phxDebounce);\n    let throttle = el.getAttribute(phxThrottle);\n    if (debounce === \"\") {\n      debounce = defaultDebounce;\n    }\n    if (throttle === \"\") {\n      throttle = defaultThrottle;\n    }\n    const value = debounce || throttle;\n    switch (value) {\n      case null: {\n        return callback();\n      }\n\n      case \"blur\": {\n        if (this.private(el, DEBOUNCE_BLUR)) {\n          return;\n        }\n        el.addEventListener(\"blur\", () => callback());\n        this.putPrivate(el, DEBOUNCE_BLUR, value);\n        return;\n      }\n\n      default: {\n        const timeout = parseInt(value);\n        if (isNaN(timeout)) {\n          return logError(`invalid throttle/debounce value: ${value}`);\n        }\n        if (throttle && event.type === \"keydown\") {\n          const prevKey = this.private(el, DEBOUNCE_PREV_KEY);\n          this.putPrivate(el, DEBOUNCE_PREV_KEY, event.key);\n          if (prevKey !== event.key) {\n            return callback();\n          }\n        }\n        if (this.private(el, DEBOUNCE_TIMER)) {\n          return;\n        }\n\n        const clearTimer = (e) => {\n          if (\n            throttle &&\n            e.type === PHX_CHANGE_EVENT &&\n            e.detail.triggeredBy.name === el.name\n          ) {\n            return;\n          }\n          clearTimeout(this.private(el, DEBOUNCE_TIMER));\n          this.deletePrivate(el, DEBOUNCE_TIMER);\n        };\n        const debounceCallback = () => {\n          if (el.form) {\n            el.form.removeEventListener(PHX_CHANGE_EVENT, clearTimer);\n            el.form.removeEventListener(\"submit\", clearTimer);\n          }\n          el.removeEventListener(\"blur\", this.private(el, DEBOUNCE_BLUR_TIMER));\n          this.deletePrivate(el, DEBOUNCE_BLUR_TIMER);\n          this.deletePrivate(el, DEBOUNCE_TIMER);\n          if (!throttle) {\n            callback();\n          }\n        };\n        const blurCallback = () => {\n          clearTimeout(this.private(el, DEBOUNCE_TIMER));\n          debounceCallback();\n        };\n        this.putPrivate(\n          el,\n          DEBOUNCE_TIMER,\n          setTimeout(debounceCallback, timeout)\n        );\n        el.addEventListener(\"blur\", blurCallback);\n        this.putPrivate(el, DEBOUNCE_BLUR_TIMER, blurCallback);\n        if (el.form) {\n          el.form.addEventListener(PHX_CHANGE_EVENT, clearTimer);\n          el.form.addEventListener(\"submit\", clearTimer);\n        }\n        if (throttle) {\n          callback();\n        }\n      }\n    }\n  },\n\n  discardError(container, el, phxFeedbackFor) {\n    const field = el.getAttribute && el.getAttribute(phxFeedbackFor);\n    const input = field && container.querySelector(`#${field}`);\n    if (!input) {\n      return;\n    }\n\n    if (\n      !(\n        this.private(input, PHX_HAS_FOCUSED) ||\n        this.private(input.form, PHX_HAS_SUBMITTED)\n      )\n    ) {\n      el.classList.add(PHX_NO_FEEDBACK_CLASS);\n    }\n  },\n\n  isPhxChild(node) {\n    return node.getAttribute && node.getAttribute(PHX_PARENT_ID);\n  },\n\n  dispatchEvent(target, eventString, detail = {}) {\n    const event = new CustomEvent(eventString, {\n      bubbles: true,\n      cancelable: true,\n      detail: detail,\n    });\n    target.dispatchEvent(event);\n  },\n\n  cloneNode(node, html?) {\n    if (typeof html === \"undefined\") {\n      return node.cloneNode(true);\n    } else {\n      const cloned = node.cloneNode(false);\n      cloned.innerHTML = html;\n      return cloned;\n    }\n  },\n\n  mergeAttrs(target, source, exclude = []) {\n    const sourceAttrs = source.attributes;\n    for (let i = sourceAttrs.length - 1; i >= 0; i--) {\n      const name = sourceAttrs[i].name;\n      if (exclude.indexOf(name) < 0) {\n        target.setAttribute(name, source.getAttribute(name));\n      }\n    }\n\n    const targetAttrs = target.attributes;\n    for (let i = targetAttrs.length - 1; i >= 0; i--) {\n      const name = targetAttrs[i].name;\n      if (!source.hasAttribute(name)) {\n        target.removeAttribute(name);\n      }\n    }\n  },\n\n  mergeFocusedInput(target, source) {\n    // skip selects because FF will reset highlighted index for any setAttribute\n    if (!(target instanceof HTMLSelectElement)) {\n      DOM.mergeAttrs(target, source, [\"value\"]);\n    }\n    if (source.readOnly) {\n      target.setAttribute(\"readonly\", \"true\");\n    } else {\n      target.removeAttribute(\"readonly\");\n    }\n  },\n\n  restoreFocus(focused, selectionStart, selectionEnd) {\n    if (!DOM.isTextualInput(focused)) {\n      return;\n    }\n    const wasFocused = focused.matches(\":focus\");\n    if (focused.readOnly) {\n      focused.blur();\n    }\n    if (!wasFocused) {\n      focused.focus();\n    }\n    if (\n      (focused.setSelectionRange && focused.type === \"text\") ||\n      focused.type === \"textarea\"\n    ) {\n      focused.setSelectionRange(selectionStart, selectionEnd);\n    }\n  },\n\n  isFormInput(el) {\n    return /^(?:input|select|textarea)$/i.test(el.tagName);\n  },\n\n  syncAttrsToProps(el) {\n    if (\n      el instanceof HTMLInputElement &&\n      CHECKABLE_INPUTS.indexOf(el.type.toLocaleLowerCase()) >= 0\n    ) {\n      el.checked = el.getAttribute(\"checked\") !== null;\n    }\n  },\n\n  isTextualInput(el) {\n    return FOCUSABLE_INPUTS.indexOf(el.type) >= 0;\n  },\n\n  isNowTriggerFormExternal(el, phxTriggerExternal) {\n    return el.getAttribute && el.getAttribute(phxTriggerExternal) !== null;\n  },\n\n  undoRefs(ref, container) {\n    DOM.each(container, `[${PHX_REF}]`, (el) =>\n      this.syncPendingRef(ref, el, el)\n    );\n  },\n\n  syncPendingRef(ref, fromEl, toEl) {\n    const fromRefAttr = fromEl.getAttribute && fromEl.getAttribute(PHX_REF);\n    if (fromRefAttr === null) {\n      return true;\n    }\n\n    const fromRef = parseInt(fromRefAttr);\n    if (ref !== null && ref >= fromRef) {\n      [fromEl, toEl].forEach((el) => {\n        // remove refs\n        el.removeAttribute(PHX_REF);\n        // retore inputs\n        if (el.getAttribute(PHX_READONLY) !== null) {\n          el.readOnly = false;\n          el.removeAttribute(PHX_READONLY);\n        }\n        if (el.getAttribute(PHX_DISABLED) !== null) {\n          el.disabled = false;\n          el.removeAttribute(PHX_DISABLED);\n        }\n        // remove classes\n        PHX_EVENT_CLASSES.forEach((className) =>\n          DOM.removeClass(el, className)\n        );\n        // restore disables\n        const disableRestore = el.getAttribute(PHX_DISABLE_WITH_RESTORE);\n        if (disableRestore !== null) {\n          el.innerText = disableRestore;\n          el.removeAttribute(PHX_DISABLE_WITH_RESTORE);\n        }\n      });\n      return true;\n    } else {\n      PHX_EVENT_CLASSES.forEach((className) => {\n        fromEl.classList.contains(className) && toEl.classList.add(className);\n      });\n      toEl.setAttribute(PHX_REF, fromEl.getAttribute(PHX_REF));\n      return !(DOM.isFormInput(fromEl) || /submit/i.test(fromEl.type));\n    }\n  },\n};\n\nexport class DOMPatch {\n  private view: any;\n  private liveSocket: Socket;\n  private readonly container: any;\n  private id: any;\n  private html: any;\n  private readonly rootID: any;\n  private readonly targetCID: any;\n  private readonly ref: any;\n  private readonly cidPatch: boolean;\n  private callbacks: {\n    afteradded: any[];\n    beforeupdated: any[];\n    beforeadded: any[];\n    beforephxChildAdded: any[];\n    beforediscarded: any[];\n    afterphxChildAdded: any[];\n    afterdiscarded: any[];\n    afterupdated: any[];\n  };\n  constructor(view, container, id, html, targetCID, ref?) {\n    this.view = view;\n    this.liveSocket = view.liveSocket;\n    this.container = container;\n    this.id = id;\n    this.rootID = view.root.id;\n    this.html = html;\n    this.targetCID = targetCID;\n    this.ref = ref;\n    this.cidPatch = typeof this.targetCID === \"number\";\n    this.callbacks = {\n      beforeadded: [],\n      beforeupdated: [],\n      beforediscarded: [],\n      beforephxChildAdded: [],\n      afteradded: [],\n      afterupdated: [],\n      afterdiscarded: [],\n      afterphxChildAdded: [],\n    };\n  }\n\n  before(kind, callback) {\n    this.callbacks[`before${kind}`].push(callback);\n  }\n  after(kind, callback) {\n    this.callbacks[`after${kind}`].push(callback);\n  }\n\n  trackBefore(kind, ...args) {\n    this.callbacks[`before${kind}`].forEach((callback) => callback(...args));\n  }\n\n  trackAfter(kind, ...args) {\n    this.callbacks[`after${kind}`].forEach((callback) => callback(...args));\n  }\n\n  markPrunableContentForRemoval() {\n    DOM.each(\n      this.container,\n      `[phx-update=append] > *, [phx-update=prepend] > *`,\n      (el) => {\n        el.setAttribute(PHX_REMOVE, \"\");\n      }\n    );\n  }\n\n  perform() {\n    const { view, liveSocket, container, html } = this;\n    const targetContainer = this.isCIDPatch()\n      ? this.targetCIDContainer()\n      : container;\n    if (this.isCIDPatch() && !targetContainer) {\n      return;\n    }\n\n    const focused = liveSocket.getActiveElement();\n    const { selectionStart, selectionEnd } = focused;\n    const phxUpdate = liveSocket.binding(PHX_UPDATE);\n    const phxFeedbackFor = liveSocket.binding(PHX_FEEDBACK_FOR);\n    const phxTriggerExternal = liveSocket.binding(PHX_TRIGGER_ACTION);\n    const added = [];\n    const updates = [];\n    const appendPrependUpdates = [];\n\n    const diffHTML = liveSocket.time(\"premorph container prep\", () => {\n      return this.buildDiffHTML(container, html, phxUpdate, targetContainer);\n    });\n\n    this.trackBefore(\"added\", container);\n    this.trackBefore(\"updated\", container, container);\n\n    liveSocket.time(\"morphdom\", () => {\n      morphdom(targetContainer, diffHTML, {\n        childrenOnly: targetContainer.getAttribute(PHX_COMPONENT) === null,\n        onBeforeNodeAdded: (el) => {\n          //input handling\n          DOM.discardError(targetContainer, el, phxFeedbackFor);\n          this.trackBefore(\"added\", el);\n          return el;\n        },\n        onNodeAdded: (el) => {\n          if (DOM.isNowTriggerFormExternal(el, phxTriggerExternal)) {\n            (el as HTMLFormElement).submit();\n          }\n          // nested view handling\n          if (DOM.isPhxChild(el) && view.ownsElement(el)) {\n            this.trackAfter(\"phxChildAdded\", el);\n          }\n          added.push(el);\n          return el;\n        },\n        onNodeDiscarded: (el) => {\n          this.trackAfter(\"discarded\", el);\n        },\n        onBeforeNodeDiscarded: (el) => {\n          if (\n            (el as HTMLElement).getAttribute &&\n            (el as HTMLElement).getAttribute(PHX_REMOVE) !== null\n          ) {\n            return true;\n          }\n          if (\n            DOM.isPhxUpdate(el.parentNode, phxUpdate, [\"append\", \"prepend\"])\n          ) {\n            return false;\n          }\n          if (this.skipCIDSibling(el)) {\n            return false;\n          }\n          this.trackBefore(\"discarded\", el);\n          // nested view handling\n          if (DOM.isPhxChild(el)) {\n            liveSocket.destroyViewByEl(el);\n            return true;\n          }\n        },\n        onElUpdated: (el) => {\n          if (DOM.isNowTriggerFormExternal(el, phxTriggerExternal)) {\n            (el as HTMLFormElement).submit();\n          }\n          updates.push(el);\n        },\n        onBeforeElUpdated: (fromEl, toEl) => {\n          if (this.skipCIDSibling(toEl)) {\n            return false;\n          }\n          if (fromEl.getAttribute(phxUpdate) === \"ignore\") {\n            this.trackBefore(\"updated\", fromEl, toEl);\n            DOM.mergeAttrs(fromEl, toEl);\n            updates.push(fromEl);\n            return false;\n          }\n          if (\n            (fromEl as HTMLInputElement).type === \"number\" &&\n            (fromEl as HTMLInputElement).validity &&\n            (fromEl as HTMLInputElement).validity.badInput\n          ) {\n            return false;\n          }\n          if (!DOM.syncPendingRef(this.ref, fromEl, toEl)) {\n            return false;\n          }\n\n          // nested view handling\n          if (DOM.isPhxChild(toEl)) {\n            const prevStatic = fromEl.getAttribute(PHX_STATIC);\n            DOM.mergeAttrs(fromEl, toEl);\n            fromEl.setAttribute(PHX_STATIC, prevStatic);\n            fromEl.setAttribute(PHX_ROOT_ID, this.rootID);\n            return false;\n          }\n\n          // input handling\n          DOM.copyPrivates(toEl, fromEl);\n          DOM.discardError(targetContainer, toEl, phxFeedbackFor);\n\n          const isFocusedFormEl =\n            focused && fromEl.isSameNode(focused) && DOM.isFormInput(fromEl);\n          if (isFocusedFormEl && !this.forceFocusedSelectUpdate(fromEl, toEl)) {\n            this.trackBefore(\"updated\", fromEl, toEl);\n            DOM.mergeFocusedInput(fromEl, toEl);\n            DOM.syncAttrsToProps(fromEl);\n            updates.push(fromEl);\n            return false;\n          } else {\n            // we optimize append/prepend operations in two ways:\n            //   1) By tracking the previously appended ids. If the ids don't\n            //     change b/w patches, we know that we are going to re-arrange\n            //     the same appendPrependUpdates so we can skip the post-morph\n            //     append/prepend ops.\n            //   2) for appends, we can skip post-morph re-arranging if the\n            //     new content contains only new ids, because it will simply\n            //     be appended to the container\n            if (DOM.isPhxUpdate(toEl, phxUpdate, [\"append\", \"prepend\"])) {\n              const isAppend = toEl.getAttribute(phxUpdate) === \"append\";\n              const idsBefore = Array.from(fromEl.children).map(\n                (child) => child.id\n              );\n              const newIds = Array.from(toEl.children).map((child) => child.id);\n              const isOnlyNewIds =\n                isAppend && !newIds.find((id) => idsBefore.indexOf(id) >= 0);\n\n              if (!isOnlyNewIds) {\n                appendPrependUpdates.push([toEl.id, idsBefore]);\n              }\n            }\n            DOM.syncAttrsToProps(toEl);\n            this.trackBefore(\"updated\", fromEl, toEl);\n            return true;\n          }\n        },\n      });\n    });\n\n    if (liveSocket.isDebugEnabled()) {\n      detectDuplicateIds();\n    }\n\n    if (appendPrependUpdates.length > 0) {\n      liveSocket.time(\"post-morph append/prepend restoration\", () => {\n        appendPrependUpdates.forEach(([containerID, idsBefore]) => {\n          const el = DOM.byId(containerID);\n          const isAppend = el?.getAttribute(phxUpdate) === \"append\";\n          if (isAppend) {\n            idsBefore.reverse().forEach((id) => {\n              maybe(document.getElementById(id), (child) =>\n                el.insertBefore(child, el.firstChild)\n              );\n            });\n          } else {\n            idsBefore.forEach((id) => {\n              maybe(document.getElementById(id), (child) =>\n                el.appendChild(child)\n              );\n            });\n          }\n        });\n      });\n    }\n\n    liveSocket.silenceEvents(() =>\n      DOM.restoreFocus(focused, selectionStart, selectionEnd)\n    );\n    DOM.dispatchEvent(document, \"phx:update\");\n    added.forEach((el) => this.trackAfter(\"added\", el));\n    updates.forEach((el) => this.trackAfter(\"updated\", el));\n\n    return true;\n  }\n\n  forceFocusedSelectUpdate(fromEl, toEl) {\n    return fromEl.multiple === true || fromEl.innerHTML != toEl.innerHTML;\n  }\n\n  isCIDPatch() {\n    return this.cidPatch;\n  }\n\n  skipCIDSibling(el) {\n    return (\n      el.nodeType === Node.ELEMENT_NODE && el.getAttribute(PHX_SKIP) !== null\n    );\n  }\n\n  targetCIDContainer() {\n    if (!this.isCIDPatch()) {\n      return;\n    }\n    const [first, ...rest] = DOM.findComponentNodeList(\n      this.container,\n      this.targetCID\n    );\n    if (rest.length === 0) {\n      return first;\n    } else {\n      return first && first.parentNode;\n    }\n  }\n\n  // builds HTML for morphdom patch\n  // - for full patches of LiveView or a component with a single\n  //   root node, simply returns the HTML\n  // - for patches of a component with multiple root nodes, the\n  //   parent node becomes the target container and non-component\n  //   siblings are marked as skip.\n  buildDiffHTML(container, html, phxUpdate, targetContainer) {\n    const isCIDPatch = this.isCIDPatch();\n    const isCIDWithSingleRoot =\n      isCIDPatch &&\n      targetContainer.getAttribute(PHX_COMPONENT) === this.targetCID.toString();\n    if (!isCIDPatch || isCIDWithSingleRoot) {\n      return html;\n    } else {\n      // component patch with multiple CID roots\n      let diffContainer = null;\n      const template = document.createElement(\"template\");\n      diffContainer = DOM.cloneNode(targetContainer);\n      const [firstComponent, ...rest] = DOM.findComponentNodeList(\n        diffContainer,\n        this.targetCID\n      );\n      template.innerHTML = html;\n      rest.forEach((el) => el.remove());\n      Array.from(diffContainer.childNodes).forEach((child: Element) => {\n        if (\n          child.nodeType === Node.ELEMENT_NODE &&\n          child.getAttribute(PHX_COMPONENT) !== this.targetCID.toString()\n        ) {\n          child.setAttribute(PHX_SKIP, \"\");\n          child.innerHTML = \"\";\n        }\n      });\n      Array.from(template.content.childNodes).forEach((el) =>\n        diffContainer.insertBefore(el, firstComponent)\n      );\n      firstComponent.remove();\n      return diffContainer.outerHTML;\n    }\n  }\n}\n","import { LINK_HEADER, PUSH_TIMEOUT } from \"./constants\";\n\nexport const Browser = {\n  canPushState() {\n    return typeof history.pushState !== \"undefined\";\n  },\n\n  dropLocal(namespace, subkey) {\n    return window.localStorage.removeItem(this.localKey(namespace, subkey));\n  },\n\n  updateLocal(namespace, subkey, initial, func) {\n    const current = this.getLocal(namespace, subkey);\n    const key = this.localKey(namespace, subkey);\n    const newVal = current === null ? initial : func(current);\n    window.localStorage.setItem(key, JSON.stringify(newVal));\n    return newVal;\n  },\n\n  getLocal(namespace, subkey) {\n    return JSON.parse(\n      window.localStorage.getItem(this.localKey(namespace, subkey))\n    );\n  },\n\n  fetchPage(href, callback) {\n    const req = new XMLHttpRequest();\n    req.open(\"GET\", href, true);\n    req.timeout = PUSH_TIMEOUT;\n    req.setRequestHeader(\"content-type\", \"text/html\");\n    req.setRequestHeader(\n      \"cache-control\",\n      \"max-age=0, no-cache, no-store, must-revalidate, post-check=0, pre-check=0\"\n    );\n    req.setRequestHeader(LINK_HEADER, \"live-link\");\n    req.onerror = () => callback(400);\n    req.ontimeout = () => callback(504);\n    req.onreadystatechange = () => {\n      if (req.readyState !== 4) {\n        return;\n      }\n      if (req.getResponseHeader(LINK_HEADER) !== \"live-link\") {\n        return callback(400);\n      }\n      if (req.status !== 200) {\n        return callback(req.status);\n      }\n      callback(200, req.responseText);\n    };\n    req.send();\n  },\n\n  pushState(kind, meta, to?) {\n    if (this.canPushState()) {\n      if (to !== window.location.href) {\n        history[kind + \"State\"](meta, \"\", to || null); // IE will coerce undefined to string\n        const hashEl = this.getHashTargetEl(window.location.hash);\n\n        if (hashEl) {\n          hashEl.scrollIntoView();\n        } else if (meta.type === \"redirect\") {\n          window.scroll(0, 0);\n        }\n      }\n    } else {\n      this.redirect(to);\n    }\n  },\n\n  setCookie(name, value) {\n    document.cookie = `${name}=${value}`;\n  },\n\n  getCookie(name) {\n    return document.cookie.replace(\n      new RegExp(`(?:(?:^|.*;\\s*)${name}\\s*\\=\\s*([^;]*).*$)|^.*$`),\n      \"$1\"\n    );\n  },\n\n  redirect(toURL, flash?) {\n    if (flash) {\n      Browser.setCookie(\"__phoenix_flash__\", flash + \"; max-age=60000; path=/\");\n    }\n    window.location = toURL;\n  },\n\n  localKey(namespace, subkey) {\n    return `${namespace}-${subkey}`;\n  },\n\n  getHashTargetEl(hash) {\n    if (hash.toString() === \"\") {\n      return;\n    }\n    return (\n      document.getElementById(hash) ||\n      document.querySelector(`a[name=\"${hash.substring(1)}\"]`)\n    );\n  },\n};\n","import {\n  COMPONENTS,\n  DYNAMICS,\n  PHX_COMPONENT,\n  PHX_SKIP,\n  STATIC,\n} from \"./constants\";\nimport { isObject, logError } from \"./util\";\n\nexport class Rendered {\n  private readonly viewId: any;\n  private rendered: any;\n  constructor(viewId, rendered) {\n    this.viewId = viewId;\n    this.replaceRendered(rendered);\n  }\n\n  parentViewId() {\n    return this.viewId;\n  }\n\n  toString(onlyCids) {\n    return this.recursiveToString(\n      this.rendered,\n      this.rendered[COMPONENTS],\n      onlyCids\n    );\n  }\n\n  recursiveToString(\n    rendered,\n    components = rendered[COMPONENTS] || {},\n    onlyCids\n  ) {\n    onlyCids = onlyCids ? new Set(onlyCids) : null;\n    const output = { buffer: \"\", components: components, onlyCids: onlyCids };\n    this.toOutputBuffer(rendered, output);\n    return output.buffer;\n  }\n\n  componentCIDs(diff) {\n    return Object.keys(diff[COMPONENTS] || {}).map((i) => parseInt(i));\n  }\n\n  isComponentOnlyDiff(diff) {\n    if (!diff[COMPONENTS]) {\n      return false;\n    }\n    return (\n      Object.keys(diff).filter((k) => k !== \"title\" && k !== COMPONENTS)\n        .length === 0\n    );\n  }\n\n  mergeDiff(diff) {\n    if (!diff[COMPONENTS] && this.isNewFingerprint(diff)) {\n      this.replaceRendered(diff);\n    } else {\n      this.recursiveMerge(this.rendered, diff);\n    }\n  }\n\n  recursiveMerge(target, source) {\n    Object.keys(source).forEach((key) => {\n      const val = source[key];\n      const targetVal = target[key];\n      if (isObject(val) && isObject(targetVal)) {\n        if (targetVal[DYNAMICS] && !val[DYNAMICS]) {\n          delete targetVal[DYNAMICS];\n        }\n        this.recursiveMerge(targetVal, val);\n      } else {\n        target[key] = val;\n      }\n    });\n  }\n\n  componentToString(cid) {\n    return this.recursiveCIDToString(this.rendered[COMPONENTS], cid);\n  }\n\n  pruneCIDs(cids) {\n    cids.forEach((cid) => delete this.rendered[COMPONENTS][cid]);\n  }\n\n  // private\n\n  get() {\n    return this.rendered;\n  }\n\n  replaceRendered(rendered) {\n    this.rendered = rendered;\n    this.rendered[COMPONENTS] = this.rendered[COMPONENTS] || {};\n  }\n\n  isNewFingerprint(diff = {}) {\n    return !!diff[STATIC];\n  }\n\n  toOutputBuffer(rendered, output) {\n    if (rendered[DYNAMICS]) {\n      return this.comprehensionToBuffer(rendered, output);\n    }\n    const { [STATIC]: statics } = rendered;\n\n    output.buffer += statics[0];\n    for (let i = 1; i < statics.length; i++) {\n      this.dynamicToBuffer(rendered[i - 1], output);\n      output.buffer += statics[i];\n    }\n  }\n\n  comprehensionToBuffer(rendered, output) {\n    const { [DYNAMICS]: dynamics, [STATIC]: statics } = rendered;\n\n    for (let d = 0; d < dynamics.length; d++) {\n      const dynamic = dynamics[d];\n      output.buffer += statics[0];\n      for (let i = 1; i < statics.length; i++) {\n        this.dynamicToBuffer(dynamic[i - 1], output);\n        output.buffer += statics[i];\n      }\n    }\n  }\n\n  dynamicToBuffer(rendered, output) {\n    if (typeof rendered === \"number\") {\n      output.buffer += this.recursiveCIDToString(\n        output.components,\n        rendered,\n        output.onlyCids\n      );\n    } else if (isObject(rendered)) {\n      this.toOutputBuffer(rendered, output);\n    } else {\n      output.buffer += rendered;\n    }\n  }\n\n  recursiveCIDToString(components, cid, onlyCids?) {\n    const component =\n      components[cid] || logError(`no component for CID ${cid}`, components);\n    const template = document.createElement(\"template\");\n    template.innerHTML = this.recursiveToString(\n      component,\n      components,\n      onlyCids\n    );\n    const container = template.content;\n    const skip = onlyCids && !onlyCids.has(cid);\n    Array.from(container.children).forEach((child, i) => {\n      if (child.nodeType === Node.ELEMENT_NODE) {\n        child.setAttribute(PHX_COMPONENT, cid);\n        if (!child.id) {\n          child.id = `${this.parentViewId()}-${cid}-${i}`;\n        }\n        if (skip) {\n          child.setAttribute(PHX_SKIP, \"\");\n          child.innerHTML = \"\";\n        }\n      } else {\n        if (child.nodeValue.trim() !== \"\") {\n          logError(\n            `only HTML element tags are allowed at the root of components.\\n\\n` +\n              `got: \"${child.nodeValue.trim()}\"\\n\\n` +\n              `within:\\n`,\n            template.innerHTML.trim()\n          );\n\n          const span = document.createElement(\"span\");\n          span.innerText = child.nodeValue;\n          span.setAttribute(PHX_COMPONENT, cid);\n          child.replaceWith(span);\n        } else {\n          child.remove();\n        }\n      }\n    });\n\n    return template.innerHTML;\n  }\n}\n","import {\n  COMPONENTS,\n  CONSECUTIVE_RELOADS,\n  PHX_COMPONENT,\n  PHX_CONNECTED_CLASS,\n  PHX_DISCONNECTED_CLASS,\n  PHX_PARENT_ID,\n  PHX_ROOT_ID,\n  PHX_SESSION,\n  PHX_STATIC,\n  PHX_VIEW,\n  PHX_VIEW_SELECTOR,\n  PHX_ERROR_CLASS,\n  PHX_REF,\n  PHX_HOOK,\n  PHX_UPDATE,\n  BEFORE_UNLOAD_LOADER_TIMEOUT,\n  PHX_PAGE_LOADING,\n  PUSH_TIMEOUT,\n  PHX_DISABLE_WITH,\n  PHX_DISABLE_WITH_RESTORE,\n  CHECKABLE_INPUTS,\n  PHX_CHANGE_EVENT,\n  PHX_DISABLED,\n  PHX_READONLY,\n  PHX_AUTO_RECOVER,\n  PHX_HAS_SUBMITTED,\n} from \"./constants\";\nimport { DOM, DOMPatch } from \"./dom\";\nimport { Browser } from \"./browser\";\nimport {\n  closestPhxBinding,\n  isEmpty,\n  isEqualObj,\n  logError,\n  maybe,\n  serializeForm,\n} from \"./util\";\nimport { Socket } from \"phoenix\";\nimport { Rendered } from \"./rendered\";\n\nexport class View {\n  id: string;\n  private readonly liveSocket: Socket;\n  private flash: any;\n  private readonly parent: View;\n  private root: View;\n  el: Element;\n  private readonly view: string;\n  private ref: number;\n  private href: string;\n  private childJoins: number;\n  private pendingDiffs: any[];\n  private loaderTimer: number;\n  private joinCount: number;\n  private joinPending: boolean;\n  private joinCallback: () => void;\n  private destroyed: boolean;\n  private stopCallback: () => void;\n  private pendingJoinOps: any[];\n  private readonly viewHooks: {};\n  private readonly children: {};\n  private readonly channel: any;\n  private rendered: Rendered;\n\n  constructor(el, liveSocket, parentView, href?, flash?) {\n    this.liveSocket = liveSocket;\n    this.flash = flash;\n    this.parent = parentView;\n    this.root = parentView ? parentView.root : this;\n    this.el = el;\n    this.id = this.el.id;\n    this.view = this.el.getAttribute(PHX_VIEW);\n    this.ref = 0;\n    this.childJoins = 0;\n    this.loaderTimer = null;\n    this.pendingDiffs = [];\n    this.href = href;\n    this.joinCount = this.parent ? this.parent.joinCount - 1 : 0;\n    this.joinPending = true;\n    this.destroyed = false;\n    this.joinCallback = function () {};\n    this.stopCallback = function () {};\n    this.pendingJoinOps = this.parent ? null : [];\n    this.viewHooks = {};\n    this.children = this.parent ? null : {};\n    this.root.children[this.id] = {};\n    this.channel = this.liveSocket.channel(`lv:${this.id}`, () => {\n      return {\n        url: this.href,\n        params: this.liveSocket.params(this.view),\n        session: this.getSession(),\n        static: this.getStatic(),\n        flash: this.flash,\n        joins: this.joinCount,\n      };\n    });\n    this.showLoader(this.liveSocket.loaderTimeout);\n    this.bindChannel();\n  }\n\n  isMain() {\n    return this.liveSocket.main === this;\n  }\n\n  name() {\n    return this.view;\n  }\n\n  isConnected() {\n    return this.channel.canPush();\n  }\n\n  getSession() {\n    return this.el.getAttribute(PHX_SESSION);\n  }\n\n  getStatic() {\n    const val = this.el.getAttribute(PHX_STATIC);\n    return val === \"\" ? null : val;\n  }\n\n  destroy(callback = function () {}) {\n    this.destroyAllChildren();\n    this.destroyed = true;\n    delete this.root.children[this.id];\n    if (this.parent) {\n      delete this.root.children[this.parent.id][this.id];\n    }\n    clearTimeout(this.loaderTimer);\n    const onFinished = () => {\n      callback();\n      for (const id in this.viewHooks) {\n        this.destroyHook(this.viewHooks[id]);\n      }\n    };\n\n    this.log(\"destroyed\", () => [\"the child has been removed from the parent\"]);\n    this.channel\n      .leave()\n      .receive(\"ok\", onFinished)\n      .receive(\"error\", onFinished)\n      .receive(\"timeout\", onFinished);\n  }\n\n  setContainerClasses(...classes) {\n    this.el.classList.remove(\n      PHX_CONNECTED_CLASS,\n      PHX_DISCONNECTED_CLASS,\n      PHX_ERROR_CLASS\n    );\n    this.el.classList.add(...classes);\n  }\n\n  isLoading() {\n    return this.el.classList.contains(PHX_DISCONNECTED_CLASS);\n  }\n\n  showLoader(timeout?) {\n    clearTimeout(this.loaderTimer);\n    if (timeout) {\n      this.loaderTimer = window.setTimeout(() => this.showLoader(), timeout);\n    } else {\n      for (const id in this.viewHooks) {\n        this.viewHooks[id].__trigger__(\"disconnected\");\n      }\n      this.setContainerClasses(PHX_DISCONNECTED_CLASS);\n    }\n  }\n\n  hideLoader() {\n    clearTimeout(this.loaderTimer);\n    this.setContainerClasses(PHX_CONNECTED_CLASS);\n  }\n\n  triggerReconnected() {\n    for (const id in this.viewHooks) {\n      this.viewHooks[id].__trigger__(\"reconnected\");\n    }\n  }\n\n  log(kind, msgCallback) {\n    this.liveSocket.log(this, kind, msgCallback);\n  }\n\n  onJoin(resp) {\n    const { rendered } = resp;\n    this.joinCount++;\n    this.childJoins = 0;\n    this.joinPending = true;\n    this.flash = null;\n\n    this.log(\"join\", () => [\"\", rendered]);\n    if (rendered.title) {\n      DOM.putTitle(rendered.title);\n    }\n    Browser.dropLocal(this.name(), CONSECUTIVE_RELOADS);\n    this.rendered = new Rendered(this.id, rendered);\n    const html = this.renderContainer(null, \"join\");\n    this.dropPendingRefs();\n    const forms = this.formsForRecovery(html);\n\n    if (this.joinCount > 1 && forms.length > 0) {\n      forms.forEach((form, i) => {\n        this.pushFormRecovery(form, (resp) => {\n          if (i === forms.length - 1) {\n            this.onJoinComplete(resp, html);\n          }\n        });\n      });\n    } else {\n      this.onJoinComplete(resp, html);\n    }\n  }\n\n  dropPendingRefs() {\n    DOM.each(this.el, `[${PHX_REF}]`, (el) => el.removeAttribute(PHX_REF));\n  }\n\n  onJoinComplete({ live_patch }, html) {\n    if (this.joinCount > 1 || (this.parent && !this.parent.isJoinPending())) {\n      return this.applyJoinPatch(live_patch, html);\n    }\n\n    const newChildren = DOM.findPhxChildrenInFragment(\n      html,\n      this.id\n    ).filter((c) => this.joinChild(c));\n    if (newChildren.length === 0) {\n      if (this.parent) {\n        this.root.pendingJoinOps.push([\n          this,\n          () => this.applyJoinPatch(live_patch, html),\n        ]);\n        this.parent.ackJoin(this);\n      } else {\n        this.onAllChildJoinsComplete();\n        this.applyJoinPatch(live_patch, html);\n      }\n    } else {\n      this.root.pendingJoinOps.push([\n        this,\n        () => this.applyJoinPatch(live_patch, html),\n      ]);\n    }\n  }\n\n  attachTrueDocEl() {\n    this.el = DOM.byId(this.id);\n    this.el.setAttribute(PHX_ROOT_ID, this.root.id);\n  }\n\n  applyJoinPatch(live_patch, html) {\n    this.attachTrueDocEl();\n    const patch = new DOMPatch(this, this.el, this.id, html, null);\n    patch.markPrunableContentForRemoval();\n    this.joinPending = false;\n    this.performPatch(patch);\n    this.joinNewChildren();\n    DOM.each(this.el, `[${this.binding(PHX_HOOK)}]`, (hookEl) => {\n      const hook = this.addHook(hookEl);\n      if (hook) {\n        hook.__trigger__(\"mounted\");\n      }\n    });\n\n    this.applyPendingUpdates();\n\n    if (live_patch) {\n      const { kind, to } = live_patch;\n      this.liveSocket.historyPatch(to, kind);\n    }\n    this.hideLoader();\n    if (this.joinCount > 1) {\n      this.triggerReconnected();\n    }\n    this.stopCallback();\n  }\n\n  performPatch(patch) {\n    const destroyedCIDs = [];\n    let phxChildrenAdded = false;\n    const updatedHookIds = new Set();\n\n    patch.after(\"added\", (el) => {\n      const newHook = this.addHook(el);\n      if (newHook) {\n        newHook.__trigger__(\"mounted\");\n      }\n    });\n\n    patch.after(\"phxChildAdded\", () => (phxChildrenAdded = true));\n\n    patch.before(\"updated\", (fromEl, toEl) => {\n      const hook = this.getHook(fromEl);\n      const isIgnored =\n        hook && fromEl.getAttribute(this.binding(PHX_UPDATE)) === \"ignore\";\n      if (\n        hook &&\n        !fromEl.isEqualNode(toEl) &&\n        !(isIgnored && isEqualObj(fromEl.dataset, toEl.dataset))\n      ) {\n        updatedHookIds.add(fromEl.id);\n        hook.__trigger__(\"beforeUpdate\");\n      }\n    });\n\n    patch.after(\"updated\", (el) => {\n      const hook = this.getHook(el);\n      if (hook && updatedHookIds.has(el.id)) {\n        hook.__trigger__(\"updated\");\n      }\n    });\n\n    patch.before(\"discarded\", (el) => {\n      const hook = this.getHook(el);\n      if (hook) {\n        hook.__trigger__(\"beforeDestroy\");\n      }\n    });\n\n    patch.after(\"discarded\", (el) => {\n      const cid = this.componentID(el);\n      if (typeof cid === \"number\" && destroyedCIDs.indexOf(cid) === -1) {\n        destroyedCIDs.push(cid);\n      }\n      const hook = this.getHook(el);\n      hook && this.destroyHook(hook);\n    });\n\n    patch.perform();\n    this.maybePushComponentsDestroyed(destroyedCIDs);\n\n    return phxChildrenAdded;\n  }\n\n  joinNewChildren() {\n    DOM.findPhxChildren(this.el, this.id).forEach((el) => this.joinChild(el));\n  }\n\n  getChildById(id) {\n    return this.root.children[this.id][id];\n  }\n\n  getDescendentByEl(el) {\n    if (el.id === this.id) {\n      return this;\n    } else {\n      return this.children[el.getAttribute(PHX_PARENT_ID)][el.id];\n    }\n  }\n\n  destroyDescendent(id) {\n    Object.keys(this.root.children).forEach((parentId) => {\n      Object.keys(this.root.children[parentId]).forEach((childId) => {\n        if (childId === id) {\n          return this.root.children[parentId][childId].destroy();\n        }\n      });\n    });\n  }\n\n  joinChild(el) {\n    const child = this.getChildById(el.id);\n    if (!child) {\n      const view = new View(el, this.liveSocket, this);\n      this.root.children[this.id][view.id] = view;\n      view.join();\n      this.childJoins++;\n      return true;\n    }\n  }\n\n  isJoinPending() {\n    return this.joinPending;\n  }\n\n  ackJoin(_child) {\n    this.childJoins--;\n\n    if (this.childJoins === 0) {\n      if (this.parent) {\n        this.parent.ackJoin(this);\n      } else {\n        this.onAllChildJoinsComplete();\n      }\n    }\n  }\n\n  onAllChildJoinsComplete() {\n    this.joinCallback();\n    this.pendingJoinOps.forEach(([view, op]) => {\n      if (!view.isDestroyed()) {\n        op();\n      }\n    });\n    this.pendingJoinOps = [];\n  }\n\n  update(diff, cidAck?, ref?) {\n    if (isEmpty(diff) && ref === null) {\n      return;\n    }\n    if (diff.title) {\n      DOM.putTitle(diff.title);\n    }\n    if (this.isJoinPending() || this.liveSocket.hasPendingLink()) {\n      return this.pendingDiffs.push({ diff, cid: cidAck, ref });\n    }\n\n    this.log(\"update\", () => [\"\", diff]);\n    this.rendered.mergeDiff(diff);\n    let phxChildrenAdded = false;\n\n    // when we don't have an acknowledgement CID and the diff only contains\n    // component diffs, then walk components and patch only the parent component\n    // containers found in the diff. Otherwise, patch entire LV container.\n    if (typeof cidAck === \"number\") {\n      this.liveSocket.time(\"component ack patch complete\", () => {\n        if (this.componentPatch(diff[COMPONENTS][cidAck], cidAck, ref)) {\n          phxChildrenAdded = true;\n        }\n      });\n    } else if (this.rendered.isComponentOnlyDiff(diff)) {\n      this.liveSocket.time(\"component patch complete\", () => {\n        const parentCids = DOM.findParentCIDs(\n          this.el,\n          this.rendered.componentCIDs(diff)\n        );\n        parentCids.forEach((parentCID) => {\n          if (\n            this.componentPatch(diff[COMPONENTS][parentCID], parentCID, ref)\n          ) {\n            phxChildrenAdded = true;\n          }\n        });\n      });\n    } else if (!isEmpty(diff)) {\n      this.liveSocket.time(\"full patch complete\", () => {\n        const html = this.renderContainer(diff, \"update\");\n        const patch = new DOMPatch(this, this.el, this.id, html, null, ref);\n        phxChildrenAdded = this.performPatch(patch);\n      });\n    }\n\n    DOM.undoRefs(ref, this.el);\n    if (phxChildrenAdded) {\n      this.joinNewChildren();\n    }\n  }\n\n  renderContainer(diff, kind) {\n    return this.liveSocket.time(`toString diff (${kind})`, () => {\n      const tag = this.el.tagName;\n      const cids = diff ? this.rendered.componentCIDs(diff) : null;\n      const html = this.rendered.toString(cids);\n      return `<${tag}>${html}</${tag}>`;\n    });\n  }\n\n  componentPatch(diff, cid, ref) {\n    if (isEmpty(diff)) return false;\n    const html = this.rendered.componentToString(cid);\n    const patch = new DOMPatch(this, this.el, this.id, html, cid, ref);\n    return this.performPatch(patch);\n  }\n\n  getHook(el) {\n    return this.viewHooks[ViewHook.elementID(el)];\n  }\n\n  addHook(el) {\n    if (ViewHook.elementID(el) || !el.getAttribute) {\n      return;\n    }\n    const hookName = el.getAttribute(this.binding(PHX_HOOK));\n    if (hookName && !this.ownsElement(el)) {\n      return;\n    }\n    const callbacks = this.liveSocket.getHookCallbacks(hookName);\n\n    if (callbacks) {\n      const hook = new ViewHook(this, el, callbacks);\n      this.viewHooks[ViewHook.elementID(hook.el)] = hook;\n      return hook;\n    } else if (hookName !== null) {\n      logError(`unknown hook found for \"${hookName}\"`, el);\n    }\n  }\n\n  destroyHook(hook) {\n    hook.__trigger__(\"destroyed\");\n    delete this.viewHooks[ViewHook.elementID(hook.el)];\n  }\n\n  applyPendingUpdates() {\n    this.pendingDiffs.forEach(({ diff, cid, ref }) =>\n      this.update(diff, cid, ref)\n    );\n    this.pendingDiffs = [];\n  }\n\n  onChannel(event, cb) {\n    this.liveSocket.onChannel(this.channel, event, (resp) => {\n      if (this.isJoinPending()) {\n        this.root.pendingJoinOps.push([this, () => cb(resp)]);\n      } else {\n        cb(resp);\n      }\n    });\n  }\n\n  bindChannel() {\n    this.onChannel(\"diff\", (diff) => this.update(diff));\n    this.onChannel(\"redirect\", ({ to, flash }) =>\n      this.onRedirect({ to, flash })\n    );\n    this.onChannel(\"live_patch\", (redir) => this.onLivePatch(redir));\n    this.onChannel(\"live_redirect\", (redir) => this.onLiveRedirect(redir));\n    this.onChannel(\"session\", ({ token }) =>\n      this.el.setAttribute(PHX_SESSION, token)\n    );\n    this.channel.onError((reason) => this.onError(reason));\n    this.channel.onClose(() => this.onError({ reason: \"closed\" }));\n  }\n\n  destroyAllChildren() {\n    Object.keys(this.root.children[this.id]).forEach((id) => {\n      this.getChildById(id).destroy();\n    });\n  }\n\n  onLiveRedirect(redir) {\n    const { to, kind, flash } = redir;\n    const url = this.expandURL(to);\n    this.liveSocket.historyRedirect(url, kind, flash);\n  }\n\n  onLivePatch(redir) {\n    const { to, kind } = redir;\n    this.href = this.expandURL(to);\n    this.liveSocket.historyPatch(to, kind);\n  }\n\n  expandURL(to) {\n    return to.startsWith(\"/\")\n      ? `${window.location.protocol}//${window.location.host}${to}`\n      : to;\n  }\n\n  onRedirect({ to, flash }) {\n    this.liveSocket.redirect(to, flash);\n  }\n\n  isDestroyed() {\n    return this.destroyed;\n  }\n\n  join(callback?) {\n    if (!this.parent) {\n      this.stopCallback = this.liveSocket.withPageLoading({\n        to: this.href,\n        kind: \"initial\",\n      });\n    }\n    this.joinCallback = () => callback && callback(this, this.joinCount);\n    this.liveSocket.wrapPush(() => {\n      return this.channel\n        .join()\n        .receive(\"ok\", (data) => this.onJoin(data))\n        .receive(\"error\", (resp) => this.onJoinError(resp))\n        .receive(\"timeout\", () => this.onJoinError({ reason: \"timeout\" }));\n    });\n  }\n\n  onJoinError(resp) {\n    if (resp.redirect || resp.live_redirect) {\n      this.channel.leave();\n    }\n    if (resp.redirect) {\n      return this.onRedirect(resp.redirect);\n    }\n    if (resp.live_redirect) {\n      return this.onLiveRedirect(resp.live_redirect);\n    }\n    this.log(\"error\", () => [\"unable to join\", resp]);\n    return this.liveSocket.reloadWithJitter(this);\n  }\n\n  onError(reason) {\n    if (this.isJoinPending()) {\n      return this.liveSocket.reloadWithJitter(this);\n    }\n    this.destroyAllChildren();\n    this.log(\"error\", () => [\"view crashed\", reason]);\n    this.liveSocket.onViewError(this);\n    (document.activeElement as HTMLElement).blur();\n    if (this.liveSocket.isUnloaded()) {\n      this.showLoader(BEFORE_UNLOAD_LOADER_TIMEOUT);\n    } else {\n      this.displayError();\n    }\n  }\n\n  displayError() {\n    if (this.isMain()) {\n      DOM.dispatchEvent(window, \"phx:page-loading-start\", {\n        to: this.href,\n        kind: \"error\",\n      });\n    }\n    this.showLoader();\n    this.setContainerClasses(PHX_DISCONNECTED_CLASS, PHX_ERROR_CLASS);\n  }\n\n  pushWithReply(\n    refGenerator,\n    event,\n    payload,\n    onReply = function (_resp: any) {}\n  ) {\n    const [ref, [el]] = refGenerator ? refGenerator() : [null, []];\n    let onLoadingDone = function () {};\n    if (el && el.getAttribute(this.binding(PHX_PAGE_LOADING)) !== null) {\n      onLoadingDone = this.liveSocket.withPageLoading({\n        kind: \"element\",\n        target: el,\n      });\n    }\n\n    if (typeof payload.cid !== \"number\") {\n      delete payload.cid;\n    }\n    return this.liveSocket.wrapPush(() => {\n      return this.channel\n        .push(event, payload, PUSH_TIMEOUT)\n        .receive(\"ok\", (resp) => {\n          if (resp.diff || ref !== null) {\n            this.update(resp.diff || {}, payload.cid, ref);\n          }\n          if (resp.redirect) {\n            this.onRedirect(resp.redirect);\n          }\n          if (resp.live_patch) {\n            this.onLivePatch(resp.live_patch);\n          }\n          if (resp.live_redirect) {\n            this.onLiveRedirect(resp.live_redirect);\n          }\n          onLoadingDone();\n          onReply(resp);\n        });\n    });\n  }\n\n  putRef(elements, event) {\n    const newRef = this.ref++;\n    const disableWith = this.binding(PHX_DISABLE_WITH);\n\n    elements.forEach((el) => {\n      el.classList.add(`phx-${event}-loading`);\n      el.setAttribute(PHX_REF, String(newRef));\n      const disableText = el.getAttribute(disableWith);\n      if (disableText !== null) {\n        if (!el.getAttribute(PHX_DISABLE_WITH_RESTORE)) {\n          el.setAttribute(PHX_DISABLE_WITH_RESTORE, el.innerText);\n        }\n        el.innerText = disableText;\n      }\n    });\n    return [newRef, elements];\n  }\n\n  componentID(el) {\n    const cid = el.getAttribute && el.getAttribute(PHX_COMPONENT);\n    return cid ? parseInt(cid) : null;\n  }\n\n  targetComponentID(target, targetCtx) {\n    if (target.getAttribute(this.binding(\"target\"))) {\n      return this.closestComponentID(targetCtx);\n    } else {\n      return null;\n    }\n  }\n\n  closestComponentID(targetCtx) {\n    if (targetCtx) {\n      return maybe(\n        targetCtx.closest(`[${PHX_COMPONENT}]`),\n        (el) => this.ownsElement(el) && this.componentID(el)\n      );\n    } else {\n      return null;\n    }\n  }\n\n  pushHookEvent(targetCtx, event, payload) {\n    this.pushWithReply(null, \"event\", {\n      type: \"hook\",\n      event: event,\n      value: payload,\n      cid: this.closestComponentID(targetCtx),\n    });\n  }\n\n  extractMeta(el, meta) {\n    const prefix = this.binding(\"value-\");\n    for (let i = 0; i < el.attributes.length; i++) {\n      const name = el.attributes[i].name;\n      if (name.startsWith(prefix)) {\n        meta[name.replace(prefix, \"\")] = el.getAttribute(name);\n      }\n    }\n    if (el.value !== undefined) {\n      meta.value = el.value;\n\n      if (\n        el.tagName === \"INPUT\" &&\n        CHECKABLE_INPUTS.indexOf(el.type) >= 0 &&\n        !el.checked\n      ) {\n        delete meta.value;\n      }\n    }\n    return meta;\n  }\n\n  pushEvent(type, el, targetCtx, phxEvent, meta) {\n    this.pushWithReply(() => this.putRef([el], type), \"event\", {\n      type: type,\n      event: phxEvent,\n      value: this.extractMeta(el, meta),\n      cid: this.targetComponentID(el, targetCtx),\n    });\n  }\n\n  pushKey(keyElement, targetCtx, kind, phxEvent, meta) {\n    this.pushWithReply(() => this.putRef([keyElement], kind), \"event\", {\n      type: kind,\n      event: phxEvent,\n      value: this.extractMeta(keyElement, meta),\n      cid: this.targetComponentID(keyElement, targetCtx),\n    });\n  }\n\n  pushInput(inputEl, targetCtx, phxEvent, eventTarget, callback?) {\n    DOM.dispatchEvent(inputEl.form, PHX_CHANGE_EVENT, { triggeredBy: inputEl });\n    this.pushWithReply(\n      () => this.putRef([inputEl, inputEl.form], \"change\"),\n      \"event\",\n      {\n        type: \"form\",\n        event: phxEvent,\n        value: serializeForm(inputEl.form, { _target: eventTarget.name }),\n        cid: this.targetComponentID(inputEl.form, targetCtx),\n      },\n      callback\n    );\n  }\n\n  pushFormSubmit(formEl, targetCtx, phxEvent, onReply) {\n    const filterIgnored = (el) =>\n      !closestPhxBinding(el, `${this.binding(PHX_UPDATE)}=ignore`, el.form);\n    const refGenerator = () => {\n      const disables = DOM.all(formEl, `[${this.binding(PHX_DISABLE_WITH)}]`);\n      const buttons = DOM.all(formEl, \"button\").filter(filterIgnored);\n      const inputs = DOM.all(formEl, \"input\").filter(filterIgnored);\n\n      buttons.forEach((button: HTMLButtonElement) => {\n        button.setAttribute(PHX_DISABLED, button.disabled.toString());\n        button.disabled = true;\n      });\n      inputs.forEach((input: HTMLInputElement) => {\n        input.setAttribute(PHX_READONLY, input.readOnly.toString());\n        input.readOnly = true;\n      });\n      formEl.setAttribute(this.binding(PHX_PAGE_LOADING), \"\");\n      return this.putRef(\n        [formEl].concat(disables).concat(buttons).concat(inputs),\n        \"submit\"\n      );\n    };\n    this.pushWithReply(\n      refGenerator,\n      \"event\",\n      {\n        type: \"form\",\n        event: phxEvent,\n        value: serializeForm(formEl),\n        cid: this.targetComponentID(formEl, targetCtx),\n      },\n      onReply\n    );\n  }\n\n  pushFormRecovery(form, callback) {\n    this.liveSocket.withinOwners(form, (view, targetCtx) => {\n      const input = form.elements[0];\n      const phxEvent =\n        form.getAttribute(this.binding(PHX_AUTO_RECOVER)) ||\n        form.getAttribute(this.binding(\"change\"));\n      view.pushInput(input, targetCtx, phxEvent, input, callback);\n    });\n  }\n\n  pushLinkPatch(href, targetEl, callback?) {\n    if (!this.isLoading()) {\n      this.showLoader(this.liveSocket.loaderTimeout);\n    }\n    const linkRef = this.liveSocket.setPendingLink(href);\n    const refGen = targetEl ? () => this.putRef([targetEl], \"click\") : null;\n\n    this.pushWithReply(refGen, \"link\", { url: href }, (resp) => {\n      if (resp.link_redirect) {\n        this.liveSocket.replaceMain(href, null, callback, linkRef);\n      } else if (this.liveSocket.commitPendingLink(linkRef)) {\n        this.href = href;\n        this.applyPendingUpdates();\n        this.hideLoader();\n        this.triggerReconnected();\n        callback && callback();\n      }\n    }).receive(\"timeout\", () => this.liveSocket.redirect(window.location.href));\n  }\n\n  formsForRecovery(html) {\n    const phxChange = this.binding(\"change\");\n    const template = document.createElement(\"template\");\n    template.innerHTML = html;\n\n    return DOM.all(this.el, `form[${phxChange}]`)\n      .filter((form) => this.ownsElement(form))\n      .filter(\n        (form) => form.getAttribute(this.binding(PHX_AUTO_RECOVER)) !== \"ignore\"\n      )\n      .filter((form) =>\n        template.content.querySelector(\n          `form[${phxChange}=\"${form.getAttribute(phxChange)}\"]`\n        )\n      );\n  }\n\n  maybePushComponentsDestroyed(destroyedCIDs) {\n    const completelyDestroyedCIDs = destroyedCIDs.filter((cid) => {\n      return DOM.findComponentNodeList(this.el, cid).length === 0;\n    });\n    if (completelyDestroyedCIDs.length > 0) {\n      this.pushWithReply(\n        null,\n        \"cids_destroyed\",\n        { cids: completelyDestroyedCIDs },\n        () => {\n          this.rendered.pruneCIDs(completelyDestroyedCIDs);\n        }\n      );\n    }\n  }\n\n  ownsElement(el) {\n    return (\n      el.getAttribute(PHX_PARENT_ID) === this.id ||\n      maybe(el.closest(PHX_VIEW_SELECTOR), (node) => node.id) === this.id\n    );\n  }\n\n  submitForm(form, targetCtx, phxEvent) {\n    DOM.putPrivate(form, PHX_HAS_SUBMITTED, true);\n    this.liveSocket.blurActiveElement(this);\n    this.pushFormSubmit(form, targetCtx, phxEvent, () => {\n      this.liveSocket.restorePreviouslyActiveFocus();\n    });\n  }\n\n  binding(kind) {\n    return this.liveSocket.binding(kind);\n  }\n}\n\nlet viewHookID = 1;\nclass ViewHook {\n  public el: any;\n  private __view: any;\n  private __liveSocket: any;\n  private readonly __callbacks: any;\n  private viewName: any;\n  private static makeID() {\n    return viewHookID++;\n  }\n  static elementID(el) {\n    return el.phxHookId;\n  }\n\n  constructor(view, el, callbacks) {\n    this.__view = view;\n    this.__liveSocket = view.liveSocket;\n    this.__callbacks = callbacks;\n    this.el = el;\n    this.viewName = view.name();\n    this.el.phxHookId = ViewHook.makeID();\n    Object.keys(this.__callbacks).forEach((key) => {\n      this[key] = this.__callbacks[key];\n    });\n  }\n\n  pushEvent(event, payload = {}) {\n    this.__view.pushHookEvent(null, event, payload);\n  }\n\n  pushEventTo(phxTarget, event, payload = {}) {\n    this.__liveSocket.withinTargets(null, phxTarget, (view, targetCtx) => {\n      view.pushHookEvent(targetCtx, event, payload);\n    });\n  }\n\n  __trigger__(kind) {\n    const callback = this.__callbacks[kind];\n    callback && callback.call(this);\n  }\n}\n","var DOCUMENT_FRAGMENT_NODE = 11;\n\nfunction morphAttrs(fromNode, toNode) {\n    var toNodeAttrs = toNode.attributes;\n    var attr;\n    var attrName;\n    var attrNamespaceURI;\n    var attrValue;\n    var fromValue;\n\n    // document-fragments dont have attributes so lets not do anything\n    if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE || fromNode.nodeType === DOCUMENT_FRAGMENT_NODE) {\n      return;\n    }\n\n    // update attributes on original DOM element\n    for (var i = toNodeAttrs.length - 1; i >= 0; i--) {\n        attr = toNodeAttrs[i];\n        attrName = attr.name;\n        attrNamespaceURI = attr.namespaceURI;\n        attrValue = attr.value;\n\n        if (attrNamespaceURI) {\n            attrName = attr.localName || attrName;\n            fromValue = fromNode.getAttributeNS(attrNamespaceURI, attrName);\n\n            if (fromValue !== attrValue) {\n                if (attr.prefix === 'xmlns'){\n                    attrName = attr.name; // It's not allowed to set an attribute with the XMLNS namespace without specifying the `xmlns` prefix\n                }\n                fromNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);\n            }\n        } else {\n            fromValue = fromNode.getAttribute(attrName);\n\n            if (fromValue !== attrValue) {\n                fromNode.setAttribute(attrName, attrValue);\n            }\n        }\n    }\n\n    // Remove any extra attributes found on the original DOM element that\n    // weren't found on the target element.\n    var fromNodeAttrs = fromNode.attributes;\n\n    for (var d = fromNodeAttrs.length - 1; d >= 0; d--) {\n        attr = fromNodeAttrs[d];\n        attrName = attr.name;\n        attrNamespaceURI = attr.namespaceURI;\n\n        if (attrNamespaceURI) {\n            attrName = attr.localName || attrName;\n\n            if (!toNode.hasAttributeNS(attrNamespaceURI, attrName)) {\n                fromNode.removeAttributeNS(attrNamespaceURI, attrName);\n            }\n        } else {\n            if (!toNode.hasAttribute(attrName)) {\n                fromNode.removeAttribute(attrName);\n            }\n        }\n    }\n}\n\nvar range; // Create a range object for efficently rendering strings to elements.\nvar NS_XHTML = 'http://www.w3.org/1999/xhtml';\n\nvar doc = typeof document === 'undefined' ? undefined : document;\nvar HAS_TEMPLATE_SUPPORT = !!doc && 'content' in doc.createElement('template');\nvar HAS_RANGE_SUPPORT = !!doc && doc.createRange && 'createContextualFragment' in doc.createRange();\n\nfunction createFragmentFromTemplate(str) {\n    var template = doc.createElement('template');\n    template.innerHTML = str;\n    return template.content.childNodes[0];\n}\n\nfunction createFragmentFromRange(str) {\n    if (!range) {\n        range = doc.createRange();\n        range.selectNode(doc.body);\n    }\n\n    var fragment = range.createContextualFragment(str);\n    return fragment.childNodes[0];\n}\n\nfunction createFragmentFromWrap(str) {\n    var fragment = doc.createElement('body');\n    fragment.innerHTML = str;\n    return fragment.childNodes[0];\n}\n\n/**\n * This is about the same\n * var html = new DOMParser().parseFromString(str, 'text/html');\n * return html.body.firstChild;\n *\n * @method toElement\n * @param {String} str\n */\nfunction toElement(str) {\n    str = str.trim();\n    if (HAS_TEMPLATE_SUPPORT) {\n      // avoid restrictions on content for things like `<tr><th>Hi</th></tr>` which\n      // createContextualFragment doesn't support\n      // <template> support not available in IE\n      return createFragmentFromTemplate(str);\n    } else if (HAS_RANGE_SUPPORT) {\n      return createFragmentFromRange(str);\n    }\n\n    return createFragmentFromWrap(str);\n}\n\n/**\n * Returns true if two node's names are the same.\n *\n * NOTE: We don't bother checking `namespaceURI` because you will never find two HTML elements with the same\n *       nodeName and different namespace URIs.\n *\n * @param {Element} a\n * @param {Element} b The target element\n * @return {boolean}\n */\nfunction compareNodeNames(fromEl, toEl) {\n    var fromNodeName = fromEl.nodeName;\n    var toNodeName = toEl.nodeName;\n\n    if (fromNodeName === toNodeName) {\n        return true;\n    }\n\n    if (toEl.actualize &&\n        fromNodeName.charCodeAt(0) < 91 && /* from tag name is upper case */\n        toNodeName.charCodeAt(0) > 90 /* target tag name is lower case */) {\n        // If the target element is a virtual DOM node then we may need to normalize the tag name\n        // before comparing. Normal HTML elements that are in the \"http://www.w3.org/1999/xhtml\"\n        // are converted to upper case\n        return fromNodeName === toNodeName.toUpperCase();\n    } else {\n        return false;\n    }\n}\n\n/**\n * Create an element, optionally with a known namespace URI.\n *\n * @param {string} name the element name, e.g. 'div' or 'svg'\n * @param {string} [namespaceURI] the element's namespace URI, i.e. the value of\n * its `xmlns` attribute or its inferred namespace.\n *\n * @return {Element}\n */\nfunction createElementNS(name, namespaceURI) {\n    return !namespaceURI || namespaceURI === NS_XHTML ?\n        doc.createElement(name) :\n        doc.createElementNS(namespaceURI, name);\n}\n\n/**\n * Copies the children of one DOM element to another DOM element\n */\nfunction moveChildren(fromEl, toEl) {\n    var curChild = fromEl.firstChild;\n    while (curChild) {\n        var nextChild = curChild.nextSibling;\n        toEl.appendChild(curChild);\n        curChild = nextChild;\n    }\n    return toEl;\n}\n\nfunction syncBooleanAttrProp(fromEl, toEl, name) {\n    if (fromEl[name] !== toEl[name]) {\n        fromEl[name] = toEl[name];\n        if (fromEl[name]) {\n            fromEl.setAttribute(name, '');\n        } else {\n            fromEl.removeAttribute(name);\n        }\n    }\n}\n\nvar specialElHandlers = {\n    OPTION: function(fromEl, toEl) {\n        var parentNode = fromEl.parentNode;\n        if (parentNode) {\n            var parentName = parentNode.nodeName.toUpperCase();\n            if (parentName === 'OPTGROUP') {\n                parentNode = parentNode.parentNode;\n                parentName = parentNode && parentNode.nodeName.toUpperCase();\n            }\n            if (parentName === 'SELECT' && !parentNode.hasAttribute('multiple')) {\n                if (fromEl.hasAttribute('selected') && !toEl.selected) {\n                    // Workaround for MS Edge bug where the 'selected' attribute can only be\n                    // removed if set to a non-empty value:\n                    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12087679/\n                    fromEl.setAttribute('selected', 'selected');\n                    fromEl.removeAttribute('selected');\n                }\n                // We have to reset select element's selectedIndex to -1, otherwise setting\n                // fromEl.selected using the syncBooleanAttrProp below has no effect.\n                // The correct selectedIndex will be set in the SELECT special handler below.\n                parentNode.selectedIndex = -1;\n            }\n        }\n        syncBooleanAttrProp(fromEl, toEl, 'selected');\n    },\n    /**\n     * The \"value\" attribute is special for the <input> element since it sets\n     * the initial value. Changing the \"value\" attribute without changing the\n     * \"value\" property will have no effect since it is only used to the set the\n     * initial value.  Similar for the \"checked\" attribute, and \"disabled\".\n     */\n    INPUT: function(fromEl, toEl) {\n        syncBooleanAttrProp(fromEl, toEl, 'checked');\n        syncBooleanAttrProp(fromEl, toEl, 'disabled');\n\n        if (fromEl.value !== toEl.value) {\n            fromEl.value = toEl.value;\n        }\n\n        if (!toEl.hasAttribute('value')) {\n            fromEl.removeAttribute('value');\n        }\n    },\n\n    TEXTAREA: function(fromEl, toEl) {\n        var newValue = toEl.value;\n        if (fromEl.value !== newValue) {\n            fromEl.value = newValue;\n        }\n\n        var firstChild = fromEl.firstChild;\n        if (firstChild) {\n            // Needed for IE. Apparently IE sets the placeholder as the\n            // node value and vise versa. This ignores an empty update.\n            var oldValue = firstChild.nodeValue;\n\n            if (oldValue == newValue || (!newValue && oldValue == fromEl.placeholder)) {\n                return;\n            }\n\n            firstChild.nodeValue = newValue;\n        }\n    },\n    SELECT: function(fromEl, toEl) {\n        if (!toEl.hasAttribute('multiple')) {\n            var selectedIndex = -1;\n            var i = 0;\n            // We have to loop through children of fromEl, not toEl since nodes can be moved\n            // from toEl to fromEl directly when morphing.\n            // At the time this special handler is invoked, all children have already been morphed\n            // and appended to / removed from fromEl, so using fromEl here is safe and correct.\n            var curChild = fromEl.firstChild;\n            var optgroup;\n            var nodeName;\n            while(curChild) {\n                nodeName = curChild.nodeName && curChild.nodeName.toUpperCase();\n                if (nodeName === 'OPTGROUP') {\n                    optgroup = curChild;\n                    curChild = optgroup.firstChild;\n                } else {\n                    if (nodeName === 'OPTION') {\n                        if (curChild.hasAttribute('selected')) {\n                            selectedIndex = i;\n                            break;\n                        }\n                        i++;\n                    }\n                    curChild = curChild.nextSibling;\n                    if (!curChild && optgroup) {\n                        curChild = optgroup.nextSibling;\n                        optgroup = null;\n                    }\n                }\n            }\n\n            fromEl.selectedIndex = selectedIndex;\n        }\n    }\n};\n\nvar ELEMENT_NODE = 1;\nvar DOCUMENT_FRAGMENT_NODE$1 = 11;\nvar TEXT_NODE = 3;\nvar COMMENT_NODE = 8;\n\nfunction noop() {}\n\nfunction defaultGetNodeKey(node) {\n  if (node) {\n      return (node.getAttribute && node.getAttribute('id')) || node.id;\n  }\n}\n\nfunction morphdomFactory(morphAttrs) {\n\n    return function morphdom(fromNode, toNode, options) {\n        if (!options) {\n            options = {};\n        }\n\n        if (typeof toNode === 'string') {\n            if (fromNode.nodeName === '#document' || fromNode.nodeName === 'HTML') {\n                var toNodeHtml = toNode;\n                toNode = doc.createElement('html');\n                toNode.innerHTML = toNodeHtml;\n            } else {\n                toNode = toElement(toNode);\n            }\n        }\n\n        var getNodeKey = options.getNodeKey || defaultGetNodeKey;\n        var onBeforeNodeAdded = options.onBeforeNodeAdded || noop;\n        var onNodeAdded = options.onNodeAdded || noop;\n        var onBeforeElUpdated = options.onBeforeElUpdated || noop;\n        var onElUpdated = options.onElUpdated || noop;\n        var onBeforeNodeDiscarded = options.onBeforeNodeDiscarded || noop;\n        var onNodeDiscarded = options.onNodeDiscarded || noop;\n        var onBeforeElChildrenUpdated = options.onBeforeElChildrenUpdated || noop;\n        var childrenOnly = options.childrenOnly === true;\n\n        // This object is used as a lookup to quickly find all keyed elements in the original DOM tree.\n        var fromNodesLookup = Object.create(null);\n        var keyedRemovalList = [];\n\n        function addKeyedRemoval(key) {\n            keyedRemovalList.push(key);\n        }\n\n        function walkDiscardedChildNodes(node, skipKeyedNodes) {\n            if (node.nodeType === ELEMENT_NODE) {\n                var curChild = node.firstChild;\n                while (curChild) {\n\n                    var key = undefined;\n\n                    if (skipKeyedNodes && (key = getNodeKey(curChild))) {\n                        // If we are skipping keyed nodes then we add the key\n                        // to a list so that it can be handled at the very end.\n                        addKeyedRemoval(key);\n                    } else {\n                        // Only report the node as discarded if it is not keyed. We do this because\n                        // at the end we loop through all keyed elements that were unmatched\n                        // and then discard them in one final pass.\n                        onNodeDiscarded(curChild);\n                        if (curChild.firstChild) {\n                            walkDiscardedChildNodes(curChild, skipKeyedNodes);\n                        }\n                    }\n\n                    curChild = curChild.nextSibling;\n                }\n            }\n        }\n\n        /**\n         * Removes a DOM node out of the original DOM\n         *\n         * @param  {Node} node The node to remove\n         * @param  {Node} parentNode The nodes parent\n         * @param  {Boolean} skipKeyedNodes If true then elements with keys will be skipped and not discarded.\n         * @return {undefined}\n         */\n        function removeNode(node, parentNode, skipKeyedNodes) {\n            if (onBeforeNodeDiscarded(node) === false) {\n                return;\n            }\n\n            if (parentNode) {\n                parentNode.removeChild(node);\n            }\n\n            onNodeDiscarded(node);\n            walkDiscardedChildNodes(node, skipKeyedNodes);\n        }\n\n        // // TreeWalker implementation is no faster, but keeping this around in case this changes in the future\n        // function indexTree(root) {\n        //     var treeWalker = document.createTreeWalker(\n        //         root,\n        //         NodeFilter.SHOW_ELEMENT);\n        //\n        //     var el;\n        //     while((el = treeWalker.nextNode())) {\n        //         var key = getNodeKey(el);\n        //         if (key) {\n        //             fromNodesLookup[key] = el;\n        //         }\n        //     }\n        // }\n\n        // // NodeIterator implementation is no faster, but keeping this around in case this changes in the future\n        //\n        // function indexTree(node) {\n        //     var nodeIterator = document.createNodeIterator(node, NodeFilter.SHOW_ELEMENT);\n        //     var el;\n        //     while((el = nodeIterator.nextNode())) {\n        //         var key = getNodeKey(el);\n        //         if (key) {\n        //             fromNodesLookup[key] = el;\n        //         }\n        //     }\n        // }\n\n        function indexTree(node) {\n            if (node.nodeType === ELEMENT_NODE || node.nodeType === DOCUMENT_FRAGMENT_NODE$1) {\n                var curChild = node.firstChild;\n                while (curChild) {\n                    var key = getNodeKey(curChild);\n                    if (key) {\n                        fromNodesLookup[key] = curChild;\n                    }\n\n                    // Walk recursively\n                    indexTree(curChild);\n\n                    curChild = curChild.nextSibling;\n                }\n            }\n        }\n\n        indexTree(fromNode);\n\n        function handleNodeAdded(el) {\n            onNodeAdded(el);\n\n            var curChild = el.firstChild;\n            while (curChild) {\n                var nextSibling = curChild.nextSibling;\n\n                var key = getNodeKey(curChild);\n                if (key) {\n                    var unmatchedFromEl = fromNodesLookup[key];\n                    if (unmatchedFromEl && compareNodeNames(curChild, unmatchedFromEl)) {\n                        curChild.parentNode.replaceChild(unmatchedFromEl, curChild);\n                        morphEl(unmatchedFromEl, curChild);\n                    }\n                }\n\n                handleNodeAdded(curChild);\n                curChild = nextSibling;\n            }\n        }\n\n        function cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey) {\n            // We have processed all of the \"to nodes\". If curFromNodeChild is\n            // non-null then we still have some from nodes left over that need\n            // to be removed\n            while (curFromNodeChild) {\n                var fromNextSibling = curFromNodeChild.nextSibling;\n                if ((curFromNodeKey = getNodeKey(curFromNodeChild))) {\n                    // Since the node is keyed it might be matched up later so we defer\n                    // the actual removal to later\n                    addKeyedRemoval(curFromNodeKey);\n                } else {\n                    // NOTE: we skip nested keyed nodes from being removed since there is\n                    //       still a chance they will be matched up later\n                    removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n                }\n                curFromNodeChild = fromNextSibling;\n            }\n        }\n\n        function morphEl(fromEl, toEl, childrenOnly) {\n            var toElKey = getNodeKey(toEl);\n\n            if (toElKey) {\n                // If an element with an ID is being morphed then it will be in the final\n                // DOM so clear it out of the saved elements collection\n                delete fromNodesLookup[toElKey];\n            }\n\n            if (!childrenOnly) {\n                // optional\n                if (onBeforeElUpdated(fromEl, toEl) === false) {\n                    return;\n                }\n\n                // update attributes on original DOM element first\n                morphAttrs(fromEl, toEl);\n                // optional\n                onElUpdated(fromEl);\n\n                if (onBeforeElChildrenUpdated(fromEl, toEl) === false) {\n                    return;\n                }\n            }\n\n            if (fromEl.nodeName !== 'TEXTAREA') {\n              morphChildren(fromEl, toEl);\n            } else {\n              specialElHandlers.TEXTAREA(fromEl, toEl);\n            }\n        }\n\n        function morphChildren(fromEl, toEl) {\n            var curToNodeChild = toEl.firstChild;\n            var curFromNodeChild = fromEl.firstChild;\n            var curToNodeKey;\n            var curFromNodeKey;\n\n            var fromNextSibling;\n            var toNextSibling;\n            var matchingFromEl;\n\n            // walk the children\n            outer: while (curToNodeChild) {\n                toNextSibling = curToNodeChild.nextSibling;\n                curToNodeKey = getNodeKey(curToNodeChild);\n\n                // walk the fromNode children all the way through\n                while (curFromNodeChild) {\n                    fromNextSibling = curFromNodeChild.nextSibling;\n\n                    if (curToNodeChild.isSameNode && curToNodeChild.isSameNode(curFromNodeChild)) {\n                        curToNodeChild = toNextSibling;\n                        curFromNodeChild = fromNextSibling;\n                        continue outer;\n                    }\n\n                    curFromNodeKey = getNodeKey(curFromNodeChild);\n\n                    var curFromNodeType = curFromNodeChild.nodeType;\n\n                    // this means if the curFromNodeChild doesnt have a match with the curToNodeChild\n                    var isCompatible = undefined;\n\n                    if (curFromNodeType === curToNodeChild.nodeType) {\n                        if (curFromNodeType === ELEMENT_NODE) {\n                            // Both nodes being compared are Element nodes\n\n                            if (curToNodeKey) {\n                                // The target node has a key so we want to match it up with the correct element\n                                // in the original DOM tree\n                                if (curToNodeKey !== curFromNodeKey) {\n                                    // The current element in the original DOM tree does not have a matching key so\n                                    // let's check our lookup to see if there is a matching element in the original\n                                    // DOM tree\n                                    if ((matchingFromEl = fromNodesLookup[curToNodeKey])) {\n                                        if (fromNextSibling === matchingFromEl) {\n                                            // Special case for single element removals. To avoid removing the original\n                                            // DOM node out of the tree (since that can break CSS transitions, etc.),\n                                            // we will instead discard the current node and wait until the next\n                                            // iteration to properly match up the keyed target element with its matching\n                                            // element in the original tree\n                                            isCompatible = false;\n                                        } else {\n                                            // We found a matching keyed element somewhere in the original DOM tree.\n                                            // Let's move the original DOM node into the current position and morph\n                                            // it.\n\n                                            // NOTE: We use insertBefore instead of replaceChild because we want to go through\n                                            // the `removeNode()` function for the node that is being discarded so that\n                                            // all lifecycle hooks are correctly invoked\n                                            fromEl.insertBefore(matchingFromEl, curFromNodeChild);\n\n                                            // fromNextSibling = curFromNodeChild.nextSibling;\n\n                                            if (curFromNodeKey) {\n                                                // Since the node is keyed it might be matched up later so we defer\n                                                // the actual removal to later\n                                                addKeyedRemoval(curFromNodeKey);\n                                            } else {\n                                                // NOTE: we skip nested keyed nodes from being removed since there is\n                                                //       still a chance they will be matched up later\n                                                removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n                                            }\n\n                                            curFromNodeChild = matchingFromEl;\n                                        }\n                                    } else {\n                                        // The nodes are not compatible since the \"to\" node has a key and there\n                                        // is no matching keyed node in the source tree\n                                        isCompatible = false;\n                                    }\n                                }\n                            } else if (curFromNodeKey) {\n                                // The original has a key\n                                isCompatible = false;\n                            }\n\n                            isCompatible = isCompatible !== false && compareNodeNames(curFromNodeChild, curToNodeChild);\n                            if (isCompatible) {\n                                // We found compatible DOM elements so transform\n                                // the current \"from\" node to match the current\n                                // target DOM node.\n                                // MORPH\n                                morphEl(curFromNodeChild, curToNodeChild);\n                            }\n\n                        } else if (curFromNodeType === TEXT_NODE || curFromNodeType == COMMENT_NODE) {\n                            // Both nodes being compared are Text or Comment nodes\n                            isCompatible = true;\n                            // Simply update nodeValue on the original node to\n                            // change the text value\n                            if (curFromNodeChild.nodeValue !== curToNodeChild.nodeValue) {\n                                curFromNodeChild.nodeValue = curToNodeChild.nodeValue;\n                            }\n\n                        }\n                    }\n\n                    if (isCompatible) {\n                        // Advance both the \"to\" child and the \"from\" child since we found a match\n                        // Nothing else to do as we already recursively called morphChildren above\n                        curToNodeChild = toNextSibling;\n                        curFromNodeChild = fromNextSibling;\n                        continue outer;\n                    }\n\n                    // No compatible match so remove the old node from the DOM and continue trying to find a\n                    // match in the original DOM. However, we only do this if the from node is not keyed\n                    // since it is possible that a keyed node might match up with a node somewhere else in the\n                    // target tree and we don't want to discard it just yet since it still might find a\n                    // home in the final DOM tree. After everything is done we will remove any keyed nodes\n                    // that didn't find a home\n                    if (curFromNodeKey) {\n                        // Since the node is keyed it might be matched up later so we defer\n                        // the actual removal to later\n                        addKeyedRemoval(curFromNodeKey);\n                    } else {\n                        // NOTE: we skip nested keyed nodes from being removed since there is\n                        //       still a chance they will be matched up later\n                        removeNode(curFromNodeChild, fromEl, true /* skip keyed nodes */);\n                    }\n\n                    curFromNodeChild = fromNextSibling;\n                } // END: while(curFromNodeChild) {}\n\n                // If we got this far then we did not find a candidate match for\n                // our \"to node\" and we exhausted all of the children \"from\"\n                // nodes. Therefore, we will just append the current \"to\" node\n                // to the end\n                if (curToNodeKey && (matchingFromEl = fromNodesLookup[curToNodeKey]) && compareNodeNames(matchingFromEl, curToNodeChild)) {\n                    fromEl.appendChild(matchingFromEl);\n                    // MORPH\n                    morphEl(matchingFromEl, curToNodeChild);\n                } else {\n                    var onBeforeNodeAddedResult = onBeforeNodeAdded(curToNodeChild);\n                    if (onBeforeNodeAddedResult !== false) {\n                        if (onBeforeNodeAddedResult) {\n                            curToNodeChild = onBeforeNodeAddedResult;\n                        }\n\n                        if (curToNodeChild.actualize) {\n                            curToNodeChild = curToNodeChild.actualize(fromEl.ownerDocument || doc);\n                        }\n                        fromEl.appendChild(curToNodeChild);\n                        handleNodeAdded(curToNodeChild);\n                    }\n                }\n\n                curToNodeChild = toNextSibling;\n                curFromNodeChild = fromNextSibling;\n            }\n\n            cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey);\n\n            var specialElHandler = specialElHandlers[fromEl.nodeName];\n            if (specialElHandler) {\n                specialElHandler(fromEl, toEl);\n            }\n        } // END: morphChildren(...)\n\n        var morphedNode = fromNode;\n        var morphedNodeType = morphedNode.nodeType;\n        var toNodeType = toNode.nodeType;\n\n        if (!childrenOnly) {\n            // Handle the case where we are given two DOM nodes that are not\n            // compatible (e.g. <div> --> <span> or <div> --> TEXT)\n            if (morphedNodeType === ELEMENT_NODE) {\n                if (toNodeType === ELEMENT_NODE) {\n                    if (!compareNodeNames(fromNode, toNode)) {\n                        onNodeDiscarded(fromNode);\n                        morphedNode = moveChildren(fromNode, createElementNS(toNode.nodeName, toNode.namespaceURI));\n                    }\n                } else {\n                    // Going from an element node to a text node\n                    morphedNode = toNode;\n                }\n            } else if (morphedNodeType === TEXT_NODE || morphedNodeType === COMMENT_NODE) { // Text or comment node\n                if (toNodeType === morphedNodeType) {\n                    if (morphedNode.nodeValue !== toNode.nodeValue) {\n                        morphedNode.nodeValue = toNode.nodeValue;\n                    }\n\n                    return morphedNode;\n                } else {\n                    // Text node to something else\n                    morphedNode = toNode;\n                }\n            }\n        }\n\n        if (morphedNode === toNode) {\n            // The \"to node\" was not compatible with the \"from node\" so we had to\n            // toss out the \"from node\" and use the \"to node\"\n            onNodeDiscarded(fromNode);\n        } else {\n            if (toNode.isSameNode && toNode.isSameNode(morphedNode)) {\n                return;\n            }\n\n            morphEl(morphedNode, toNode, childrenOnly);\n\n            // We now need to loop over any keyed nodes that might need to be\n            // removed. We only do the removal if we know that the keyed node\n            // never found a match. When a keyed node is matched up we remove\n            // it out of fromNodesLookup and we use fromNodesLookup to determine\n            // if a keyed node has been matched up or not\n            if (keyedRemovalList) {\n                for (var i=0, len=keyedRemovalList.length; i<len; i++) {\n                    var elToRemove = fromNodesLookup[keyedRemovalList[i]];\n                    if (elToRemove) {\n                        removeNode(elToRemove, elToRemove.parentNode, false);\n                    }\n                }\n            }\n        }\n\n        if (!childrenOnly && morphedNode !== fromNode && fromNode.parentNode) {\n            if (morphedNode.actualize) {\n                morphedNode = morphedNode.actualize(fromNode.ownerDocument || doc);\n            }\n            // If we had to swap out the from node with a new node because the old\n            // node was not compatible with the target node then we need to\n            // replace the old DOM node in the original DOM tree. This is only\n            // possible if the original DOM node was part of a DOM tree which\n            // we know is the case if it has a parent node.\n            fromNode.parentNode.replaceChild(morphedNode, fromNode);\n        }\n\n        return morphedNode;\n    };\n}\n\nvar morphdom = morphdomFactory(morphAttrs);\n\nexport default morphdom;\n","/*\n================================================================================\nPhoenix LiveView JavaScript Client\n================================================================================\n\nSee the hexdocs at `https://hexdocs.pm/phoenix_live_view` for documentation.\n\n*/\nimport { Socket } from \"phoenix\";\nimport {\n  DEFAULTS,\n  PHX_VIEW_SELECTOR,\n  LOADER_TIMEOUT,\n  PHX_LV_PROFILE,\n  PHX_LV_DEBUG,\n  PHX_LV_LATENCY_SIM,\n  BINDING_PREFIX,\n  RELOAD_JITTER,\n  CONSECUTIVE_RELOADS,\n  MAX_RELOADS,\n  FAILSAFE_JITTER,\n  PHX_PARENT_ID,\n  PHX_MAIN,\n  PHX_VIEW,\n  PHX_ROOT_ID,\n  PHX_KEY,\n  PHX_LIVE_LINK,\n  PHX_LINK_STATE,\n  PHX_HAS_FOCUSED,\n  PHX_DEBOUNCE,\n  PHX_THROTTLE,\n} from \"./constants\";\nimport { Browser } from \"./browser\";\nimport { clone, closestPhxBinding, closure, maybe } from \"./util\";\nimport { DOM } from \"./dom\";\nimport { View } from \"./view\";\n\nexport const debug = (view, kind, msg, obj) => {\n  if (view.liveSocket.isDebugEnabled()) {\n    console.log(`${view.id} ${kind}: ${msg} - `, obj);\n  }\n};\n\n/** Initializes the LiveSocket\n *\n *\n * @param {string} endPoint - The string WebSocket endpoint, ie, `\"wss://example.com/live\"`,\n *                                               `\"/live\"` (inherited host & protocol)\n * @param {Phoenix.Socket} socket - the required Phoenix Socket class imported from \"phoenix\". For example:\n *\n *     import {Socket} from \"phoenix\"\n *     import {LiveSocket} from \"phoenix_live_view\"\n *     let liveSocket = new LiveSocket(\"/live\", Socket, {...})\n *\n * @param {Object} [opts] - Optional configuration. Outside of keys listed below, all\n * configuration is passed directly to the Phoenix Socket constructor.\n * @param {Function} [opts.defaults] - The optional defaults to use for various bindings,\n * such as `phx-debounce`. Supports the following keys:\n *\n *   - debounce - the millisecond phx-debounce time. Defaults 300\n *   - throttle - the millisecond phx-throttle time. Defaults 300\n *\n * @param {Function} [opts.params] - The optional function for passing connect params.\n * The function receives the viewName associated with a given LiveView. For example:\n *\n *     (viewName) => {view: viewName, token: window.myToken}\n *\n * @param {string} [opts.bindingPrefix] - The optional prefix to use for all phx DOM annotations.\n * Defaults to \"phx-\".\n * @param {string} [opts.hooks] - The optional object for referencing LiveView hook callbacks.\n * @param {integer} [opts.loaderTimeout] - The optional delay in milliseconds to wait before apply\n * loading states.\n * @param {Function} [opts.viewLogger] - The optional function to log debug information. For example:\n *\n *     (view, kind, msg, obj) => console.log(`${view.id} ${kind}: ${msg} - `, obj)\n */\nexport class LiveSocket {\n  private unloaded: boolean;\n  private readonly socket: Socket;\n  private readonly bindingPrefix: string;\n  private opts: {};\n  private params: any;\n  private readonly viewLogger: any;\n  private defaults: any;\n  private activeElement: null;\n  private prevActive: HTMLElement;\n  private silenced: boolean;\n  private main: View;\n  private linkRef: number;\n  private readonly roots: {};\n  private href: string;\n  private pendingLink: null;\n  private currentLocation: any;\n  private readonly hooks: {};\n  private readonly loaderTimeout: any;\n  private root: any;\n\n  constructor(\n    url,\n    phxSocket,\n    opts = {\n      bindingPrefix: undefined,\n      params: undefined,\n      viewLogger: undefined,\n      defaults: undefined,\n      hooks: \"\",\n      loaderTimeout: 0,\n    }\n  ) {\n    this.unloaded = false;\n    if (!phxSocket || phxSocket.constructor.name === \"Object\") {\n      throw new Error(`\n      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:\n\n          import {Socket} from \"phoenix\"\n          import {LiveSocket} from \"phoenix_live_view\"\n          let liveSocket = new LiveSocket(\"/live\", Socket, {...})\n      `);\n    }\n    this.socket = new phxSocket(url, opts);\n    this.bindingPrefix = opts.bindingPrefix || BINDING_PREFIX;\n    this.opts = opts;\n    this.params = closure(opts.params || {});\n    this.viewLogger = opts.viewLogger;\n    this.defaults = Object.assign(clone(DEFAULTS), opts.defaults || {});\n    this.activeElement = null;\n    this.prevActive = null;\n    this.silenced = false;\n    this.main = null;\n    this.linkRef = 0;\n    this.roots = {};\n    this.href = window.location.href;\n    this.pendingLink = null;\n    this.currentLocation = clone(window.location);\n    this.hooks = opts.hooks || {};\n    this.loaderTimeout = opts.loaderTimeout || LOADER_TIMEOUT;\n\n    this.socket.onOpen(() => {\n      if (this.isUnloaded()) {\n        this.destroyAllViews();\n        this.joinRootViews();\n      }\n      this.unloaded = false;\n    });\n    window.addEventListener(\"unload\", () => {\n      this.unloaded = true;\n    });\n  }\n\n  // public\n\n  isProfileEnabled() {\n    return sessionStorage.getItem(PHX_LV_PROFILE) === \"true\";\n  }\n\n  isDebugEnabled() {\n    return sessionStorage.getItem(PHX_LV_DEBUG) === \"true\";\n  }\n\n  enableDebug() {\n    sessionStorage.setItem(PHX_LV_DEBUG, \"true\");\n  }\n\n  enableProfiling() {\n    sessionStorage.setItem(PHX_LV_PROFILE, \"true\");\n  }\n\n  disableDebug() {\n    sessionStorage.removeItem(PHX_LV_DEBUG);\n  }\n\n  disableProfiling() {\n    sessionStorage.removeItem(PHX_LV_PROFILE);\n  }\n\n  enableLatencySim(upperBoundMs) {\n    this.enableDebug();\n    console.log(\n      \"latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable\"\n    );\n    sessionStorage.setItem(PHX_LV_LATENCY_SIM, upperBoundMs);\n  }\n\n  disableLatencySim() {\n    sessionStorage.removeItem(PHX_LV_LATENCY_SIM);\n  }\n\n  getLatencySim() {\n    const str = sessionStorage.getItem(PHX_LV_LATENCY_SIM);\n    return str ? parseInt(str) : null;\n  }\n\n  getSocket() {\n    return this.socket;\n  }\n\n  connect() {\n    const doConnect = () => {\n      if (this.joinRootViews()) {\n        this.bindTopLevelEvents();\n        this.socket.connect();\n      }\n    };\n    if (\n      [\"complete\", \"loaded\", \"interactive\"].indexOf(document.readyState) >= 0\n    ) {\n      doConnect();\n    } else {\n      document.addEventListener(\"DOMContentLoaded\", () => doConnect());\n    }\n  }\n\n  disconnect() {\n    this.socket.disconnect();\n  }\n\n  // private\n\n  time(name, func) {\n    if (!this.isProfileEnabled() || !console.time) {\n      return func();\n    }\n    console.time(name);\n    const result = func();\n    console.timeEnd(name);\n    return result;\n  }\n\n  log(view, kind, msgCallback) {\n    if (this.viewLogger) {\n      const [msg, obj] = msgCallback();\n      this.viewLogger(view, kind, msg, obj);\n    } else if (this.isDebugEnabled()) {\n      const [msg, obj] = msgCallback();\n      debug(view, kind, msg, obj);\n    }\n  }\n\n  onChannel(channel, event, cb) {\n    channel.on(event, (data) => {\n      const latency = this.getLatencySim();\n      if (!latency) {\n        cb(data);\n      } else {\n        console.log(`simulating ${latency}ms of latency from server to client`);\n        setTimeout(() => cb(data), latency);\n      }\n    });\n  }\n\n  wrapPush(push) {\n    const latency = this.getLatencySim();\n    if (!latency) {\n      return push();\n    }\n\n    console.log(`simulating ${latency}ms of latency from client to server`);\n    const fakePush = {\n      receives: [],\n      receive(kind, cb) {\n        this.receives.push([kind, cb]);\n      },\n    };\n    setTimeout(() => {\n      fakePush.receives.reduce(\n        (acc, [kind, cb]) => acc.receive(kind, cb),\n        push()\n      );\n    }, latency);\n    return fakePush;\n  }\n\n  reloadWithJitter(view) {\n    this.disconnect();\n    const [minMs, maxMs] = RELOAD_JITTER;\n    let afterMs = Math.floor(Math.random() * (maxMs - minMs + 1)) + minMs;\n    const tries = Browser.updateLocal(\n      view.name(),\n      CONSECUTIVE_RELOADS,\n      0,\n      (count) => count + 1\n    );\n    this.log(view, \"join\", () => [`encountered ${tries} consecutive reloads`]);\n    if (tries > MAX_RELOADS) {\n      this.log(view, \"join\", () => [\n        `exceeded ${MAX_RELOADS} consecutive reloads. Entering failsafe mode`,\n      ]);\n      afterMs = FAILSAFE_JITTER;\n    }\n    setTimeout(() => {\n      if (this.hasPendingLink()) {\n        window.location = this.pendingLink;\n      } else {\n        window.location.reload();\n      }\n    }, afterMs);\n  }\n\n  getHookCallbacks(hookName) {\n    return this.hooks[hookName];\n  }\n\n  isUnloaded() {\n    return this.unloaded;\n  }\n\n  isConnected() {\n    return this.socket.isConnected();\n  }\n\n  getBindingPrefix() {\n    return this.bindingPrefix;\n  }\n\n  binding(kind) {\n    return `${this.getBindingPrefix()}${kind}`;\n  }\n\n  channel(topic, params) {\n    return this.socket.channel(topic, params);\n  }\n\n  joinRootViews() {\n    let rootsFound = false;\n    DOM.each(\n      document,\n      `${PHX_VIEW_SELECTOR}:not([${PHX_PARENT_ID}])`,\n      (rootEl) => {\n        const view = this.joinRootView(rootEl, this.getHref());\n        this.root = this.root || view;\n        if (rootEl.getAttribute(PHX_MAIN)) {\n          this.main = view;\n        }\n        rootsFound = true;\n      }\n    );\n    return rootsFound;\n  }\n\n  redirect(to, flash?) {\n    this.disconnect();\n    Browser.redirect(to, flash);\n  }\n\n  replaceMain(\n    href,\n    flash,\n    callback = null,\n    linkRef = this.setPendingLink(href)\n  ) {\n    const mainEl = this.main.el;\n    this.main.destroy();\n    this.main.showLoader(this.loaderTimeout);\n\n    Browser.fetchPage(href, (status, html) => {\n      if (status !== 200) {\n        return this.redirect(href);\n      }\n\n      const template = document.createElement(\"template\");\n      template.innerHTML = html;\n      const el = template.content.childNodes[0];\n      if (!el || !this.isPhxView(el)) {\n        return this.redirect(href);\n      }\n\n      this.joinRootView(el, href, flash, (newMain, joinCount) => {\n        if (joinCount !== 1) {\n          return;\n        }\n        if (!this.commitPendingLink(linkRef)) {\n          newMain.destroy();\n          return;\n        }\n        mainEl.replaceWith(newMain.el);\n        this.main = newMain;\n        callback && callback();\n      });\n    });\n  }\n\n  isPhxView(el) {\n    return el.getAttribute && el.getAttribute(PHX_VIEW) !== null;\n  }\n\n  joinRootView(el, href, flash?, callback?) {\n    const view = new View(el, this, null, href, flash);\n    this.roots[view.id] = view;\n    view.join(callback);\n    return view;\n  }\n\n  owner(childEl, callback) {\n    const view = maybe(childEl.closest(PHX_VIEW_SELECTOR), (el) =>\n      this.getViewByEl(el)\n    );\n    if (view) {\n      callback(view);\n    }\n  }\n\n  withinTargets(el, phxTarget, callback) {\n    if (/^(0|[1-9](\\d?)+)$/.test(phxTarget)) {\n      const myselfTarget = el;\n      if (!myselfTarget) {\n        throw new Error(\n          `no phx-target's found matching @myself of ${phxTarget}`\n        );\n      }\n      this.owner(myselfTarget, (view) => callback(view, myselfTarget));\n    } else {\n      const targets = Array.from(document.querySelectorAll(phxTarget));\n      if (targets.length === 0) {\n        throw new Error(`no phx-target's found for selector \"${phxTarget}\"`);\n      }\n      targets.forEach((targetEl) => {\n        this.owner(targetEl, (view) => callback(view, targetEl));\n      });\n    }\n  }\n\n  withinOwners(childEl, callback) {\n    const phxTarget = childEl.getAttribute(this.binding(\"target\"));\n    if (phxTarget === null) {\n      this.owner(childEl, (view) => callback(view, childEl));\n    } else {\n      this.withinTargets(childEl, phxTarget, callback);\n    }\n  }\n\n  getViewByEl(el) {\n    const rootId = el.getAttribute(PHX_ROOT_ID);\n    return this.getRootById(rootId).getDescendentByEl(el);\n  }\n\n  getRootById(id) {\n    return this.roots[id];\n  }\n\n  onViewError(view) {\n    this.dropActiveElement(view);\n  }\n\n  destroyAllViews() {\n    for (const id in this.roots) {\n      this.roots[id].destroy();\n      delete this.roots[id];\n    }\n  }\n\n  destroyViewByEl(el) {\n    const root = this.getRootById(el.getAttribute(PHX_ROOT_ID));\n    root.destroyDescendent(el.id);\n  }\n\n  setActiveElement(target) {\n    if (this.activeElement === target) {\n      return;\n    }\n    this.activeElement = target;\n    const cancel = () => {\n      if (target === this.activeElement) {\n        this.activeElement = null;\n      }\n      target.removeEventListener(\"mouseup\", this);\n      target.removeEventListener(\"touchend\", this);\n    };\n    target.addEventListener(\"mouseup\", cancel);\n    target.addEventListener(\"touchend\", cancel);\n  }\n\n  getActiveElement() {\n    if (document.activeElement === document.body) {\n      return this.activeElement || document.activeElement;\n    } else {\n      return document.activeElement;\n    }\n  }\n\n  dropActiveElement(view) {\n    if (this.prevActive && view.ownsElement(this.prevActive)) {\n      this.prevActive = null;\n    }\n  }\n\n  restorePreviouslyActiveFocus() {\n    if (this.prevActive !== document.body) {\n      this.prevActive?.focus();\n    }\n  }\n\n  blurActiveElement() {\n    this.prevActive = this.getActiveElement() as HTMLElement;\n    if (this.prevActive !== document.body) {\n      this.prevActive.blur();\n    }\n  }\n\n  bindTopLevelEvents() {\n    this.bindClicks();\n    this.bindNav();\n    this.bindForms();\n    this.bind(\n      { keyup: \"keyup\", keydown: \"keydown\" },\n      (e, type, view, target, targetCtx, phxEvent, _phxTarget) => {\n        const matchKey = target.getAttribute(this.binding(PHX_KEY));\n        if (matchKey && matchKey.toLowerCase() !== e.key.toLowerCase()) {\n          return;\n        }\n\n        view.pushKey(target, targetCtx, type, phxEvent, {\n          altGraphKey: e.altGraphKey,\n          altKey: e.altKey,\n          code: e.code,\n          ctrlKey: e.ctrlKey,\n          key: e.key,\n          keyIdentifier: e.keyIdentifier,\n          keyLocation: e.keyLocation,\n          location: e.location,\n          metaKey: e.metaKey,\n          repeat: e.repeat,\n          shiftKey: e.shiftKey,\n        });\n      }\n    );\n    this.bind(\n      { blur: \"focusout\", focus: \"focusin\" },\n      (e, type, view, targetEl, targetCtx, phxEvent, phxTarget) => {\n        if (!phxTarget) {\n          view.pushEvent(type, targetEl, targetCtx, phxEvent, { type: type });\n        }\n      }\n    );\n    this.bind(\n      { blur: \"blur\", focus: \"focus\" },\n      (e, type, view, targetEl, targetCtx, phxEvent, phxTarget?: string) => {\n        // blur and focus are triggered on document and window. Discard one to avoid dups\n        if (phxTarget ?? phxTarget !== \"window\") {\n          view.pushEvent(type, targetEl, targetCtx, phxEvent, { type: e.type });\n        }\n      }\n    );\n  }\n\n  setPendingLink(href) {\n    this.linkRef++;\n    this.pendingLink = href;\n    return this.linkRef;\n  }\n\n  commitPendingLink(linkRef) {\n    if (this.linkRef !== linkRef) {\n      return false;\n    } else {\n      this.href = this.pendingLink;\n      this.pendingLink = null;\n      return true;\n    }\n  }\n\n  getHref() {\n    return this.href;\n  }\n\n  hasPendingLink() {\n    return !!this.pendingLink;\n  }\n\n  bind(events, callback) {\n    Object.keys(events).forEach((event) => {\n      const browserEventName = events[event];\n\n      this.on(browserEventName, (e) => {\n        const binding = this.binding(event);\n        const windowBinding = this.binding(`window-${event}`);\n        const targetPhxEvent =\n          e.target.getAttribute && e.target.getAttribute(binding);\n        if (targetPhxEvent) {\n          this.debounce(e.target, e, () => {\n            this.withinOwners(e.target, (view, targetCtx) => {\n              callback(\n                e,\n                event,\n                view,\n                e.target,\n                targetCtx,\n                targetPhxEvent,\n                null\n              );\n            });\n          });\n        } else {\n          DOM.each(document, `[${windowBinding}]`, (el) => {\n            const phxEvent = el.getAttribute(windowBinding);\n            this.debounce(el, e, () => {\n              this.withinOwners(el, (view, targetCtx) => {\n                callback(e, event, view, el, targetCtx, phxEvent, \"window\");\n              });\n            });\n          });\n        }\n      });\n    });\n  }\n\n  bindClicks() {\n    [true, false].forEach((capture) => {\n      const click = capture\n        ? this.binding(\"capture-click\")\n        : this.binding(\"click\");\n      window.addEventListener(\n        \"click\",\n        (e) => {\n          let target = null;\n          if (capture) {\n            target = (e.target as HTMLElement).matches(`[${click}]`)\n              ? e.target\n              : (e.target as HTMLElement).querySelector(`[${click}]`);\n          } else {\n            target = closestPhxBinding(e.target, click);\n          }\n          const phxEvent = target && target.getAttribute(click);\n          if (!phxEvent) {\n            return;\n          }\n          if (target.getAttribute(\"href\") === \"#\") {\n            e.preventDefault();\n          }\n\n          const meta = {\n            altKey: e.altKey,\n            shiftKey: e.shiftKey,\n            ctrlKey: e.ctrlKey,\n            metaKey: e.metaKey,\n            x: e.x || e.clientX,\n            y: e.y || e.clientY,\n            pageX: e.pageX,\n            pageY: e.pageY,\n            screenX: e.screenX,\n            screenY: e.screenY,\n            offsetX: e.offsetX,\n            offsetY: e.offsetY,\n            detail: e.detail || 1,\n          };\n\n          this.debounce(target, e, () => {\n            this.withinOwners(target, (view, targetCtx) => {\n              view.pushEvent(\"click\", target, targetCtx, phxEvent, meta);\n            });\n          });\n        },\n        capture\n      );\n    });\n  }\n\n  bindNav() {\n    if (!Browser.canPushState()) {\n      return;\n    }\n    window.onpopstate = (event) => {\n      if (!this.registerNewLocation(window.location)) {\n        return;\n      }\n      const { type, id, root } = event.state || {};\n      const href = window.location.href;\n\n      if (this.main.isConnected() && type === \"patch\" && id === this.main.id) {\n        this.main.pushLinkPatch(href, null);\n      } else {\n        this.replaceMain(href, null, () => {\n          if (root) {\n            this.replaceRootHistory();\n          }\n        });\n      }\n    };\n    window.addEventListener(\n      \"click\",\n      (e) => {\n        const target = closestPhxBinding(e.target, PHX_LIVE_LINK);\n        const type = target && target.getAttribute(PHX_LIVE_LINK);\n        const wantsNewTab = e.metaKey || e.ctrlKey || e.button === 1;\n        if (!type || !this.isConnected() || !this.main || wantsNewTab) {\n          return;\n        }\n        const href = target.href;\n        const linkState = target.getAttribute(PHX_LINK_STATE);\n        e.preventDefault();\n        if (this.pendingLink === href) {\n          return;\n        }\n\n        if (type === \"patch\") {\n          this.pushHistoryPatch(href, linkState, target);\n        } else if (type === \"redirect\") {\n          this.historyRedirect(href, linkState);\n        } else {\n          throw new Error(\n            `expected ${PHX_LIVE_LINK} to be \"patch\" or \"redirect\", got: ${type}`\n          );\n        }\n      },\n      false\n    );\n  }\n\n  withPageLoading(info, callback) {\n    DOM.dispatchEvent(window, \"phx:page-loading-start\", info);\n    const done = () => DOM.dispatchEvent(window, \"phx:page-loading-stop\", info);\n    return callback ? callback(done) : done;\n  }\n\n  pushHistoryPatch(href, linkState, targetEl) {\n    this.withPageLoading({ to: href, kind: \"patch\" }, (done) => {\n      this.main.pushLinkPatch(href, targetEl, () => {\n        this.historyPatch(href, linkState);\n        done();\n      });\n    });\n  }\n\n  historyPatch(href, linkState) {\n    Browser.pushState(linkState, { type: \"patch\", id: this.main.id }, href);\n    this.registerNewLocation(window.location);\n  }\n\n  historyRedirect(href, linkState, flash?) {\n    this.withPageLoading({ to: href, kind: \"redirect\" }, (done) => {\n      this.replaceMain(href, flash, () => {\n        Browser.pushState(\n          linkState,\n          { type: \"redirect\", id: this.main.id },\n          href\n        );\n        this.registerNewLocation(window.location);\n        done();\n      });\n    });\n  }\n\n  replaceRootHistory() {\n    Browser.pushState(\"replace\", {\n      root: true,\n      type: \"patch\",\n      id: this.main.id,\n    });\n  }\n\n  registerNewLocation(newLocation) {\n    const { pathname, search } = this.currentLocation;\n    if (pathname + search === newLocation.pathname + newLocation.search) {\n      return false;\n    } else {\n      this.currentLocation = clone(newLocation);\n      return true;\n    }\n  }\n\n  bindForms() {\n    let iterations = 0;\n    this.on(\"submit\", (e) => {\n      const phxEvent = e.target.getAttribute(this.binding(\"submit\"));\n      if (!phxEvent) {\n        return;\n      }\n      e.preventDefault();\n      e.target.disabled = true;\n      this.withinOwners(e.target, (view, targetCtx) =>\n        view.submitForm(e.target, targetCtx, phxEvent)\n      );\n    });\n\n    for (const type of [\"change\", \"input\"]) {\n      this.on(type, (e) => {\n        const input = e.target;\n        const phxEvent =\n          input.form && input.form.getAttribute(this.binding(\"change\"));\n        if (!phxEvent) {\n          return;\n        }\n        if (\n          input.type === \"number\" &&\n          input.validity &&\n          input.validity.badInput\n        ) {\n          return;\n        }\n        const currentIterations = iterations;\n        iterations++;\n        const { at: at, type: lastType } =\n          DOM.private(input, \"prev-iteration\") || {};\n        // detect dup because some browsers dispatch both \"input\" and \"change\"\n        if (at === currentIterations - 1 && type !== lastType) {\n          return;\n        }\n\n        DOM.putPrivate(input, \"prev-iteration\", {\n          at: currentIterations,\n          type: type,\n        });\n\n        this.debounce(input, e, () => {\n          this.withinOwners(input.form, (view, targetCtx) => {\n            if (DOM.isTextualInput(input)) {\n              DOM.putPrivate(input, PHX_HAS_FOCUSED, true);\n            } else {\n              this.setActiveElement(input);\n            }\n            view.pushInput(input, targetCtx, phxEvent, e.target);\n          });\n        });\n      });\n    }\n  }\n\n  debounce(el, event, callback) {\n    const phxDebounce = this.binding(PHX_DEBOUNCE);\n    const phxThrottle = this.binding(PHX_THROTTLE);\n    const defaultDebounce = this.defaults.debounce.toString();\n    const defaultThrottle = this.defaults.throttle.toString();\n    DOM.debounce(\n      el,\n      event,\n      phxDebounce,\n      defaultDebounce,\n      phxThrottle,\n      defaultThrottle,\n      callback\n    );\n  }\n\n  silenceEvents(callback) {\n    this.silenced = true;\n    callback();\n    this.silenced = false;\n  }\n\n  on(event, callback) {\n    window.addEventListener(event, (e) => {\n      if (!this.silenced) {\n        callback(e);\n      }\n    });\n  }\n}\n\nexport default LiveSocket;\n"],"sourceRoot":""}