!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("phoenix_live_view",[],e):"object"==typeof exports?exports.phoenix_live_view=e():t.phoenix_live_view=e()}(this,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n.w={},n(n.s=7)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONSECUTIVE_RELOADS="consecutive-reloads",e.MAX_RELOADS=10,e.RELOAD_JITTER=[1e3,3e3],e.FAILSAFE_JITTER=3e4,e.PHX_VIEW="data-phx-view",e.PHX_EVENT_CLASSES=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading"],e.PHX_COMPONENT="data-phx-component",e.PHX_LIVE_LINK="data-phx-link",e.PHX_LINK_STATE="data-phx-link-state",e.PHX_REF="data-phx-ref",e.PHX_SKIP="data-phx-skip",e.PHX_REMOVE="data-phx-remove",e.PHX_PAGE_LOADING="page-loading",e.PHX_CONNECTED_CLASS="phx-connected",e.PHX_DISCONNECTED_CLASS="phx-disconnected",e.PHX_NO_FEEDBACK_CLASS="phx-no-feedback",e.PHX_ERROR_CLASS="phx-error",e.PHX_PARENT_ID="data-phx-parent-id",e.PHX_VIEW_SELECTOR="["+e.PHX_VIEW+"]",e.PHX_MAIN="data-phx-main",e.PHX_ROOT_ID="data-phx-root-id",e.PHX_TRIGGER_ACTION="trigger-action",e.PHX_FEEDBACK_FOR="feedback-for",e.PHX_HAS_FOCUSED="phx-has-focused",e.FOCUSABLE_INPUTS=["text","textarea","number","email","password","search","tel","url","date","time"],e.CHECKABLE_INPUTS=["checkbox","radio"],e.PHX_HAS_SUBMITTED="phx-has-submitted",e.PHX_SESSION="data-phx-session",e.PHX_STATIC="data-phx-static",e.PHX_READONLY="data-phx-readonly",e.PHX_DISABLED="data-phx-disabled",e.PHX_DISABLE_WITH="disable-with",e.PHX_DISABLE_WITH_RESTORE="data-phx-disable-with-restore",e.PHX_HOOK="hook",e.PHX_DEBOUNCE="debounce",e.PHX_THROTTLE="throttle",e.PHX_CHANGE_EVENT="phx-change",e.PHX_UPDATE="update",e.PHX_KEY="key",e.PHX_PRIVATE="phxPrivate",e.PHX_AUTO_RECOVER="auto-recover",e.PHX_LV_DEBUG="phx:live-socket:debug",e.PHX_LV_PROFILE="phx:live-socket:profiling",e.PHX_LV_LATENCY_SIM="phx:live-socket:latency-sim",e.LOADER_TIMEOUT=1,e.BEFORE_UNLOAD_LOADER_TIMEOUT=200,e.BINDING_PREFIX="phx-",e.PUSH_TIMEOUT=3e4,e.LINK_HEADER="x-requested-with",e.DEBOUNCE_BLUR="debounce-blur",e.DEBOUNCE_TIMER="debounce-timer",e.DEBOUNCE_BLUR_TIMER="debounce-blur-timer",e.DEBOUNCE_PREV_KEY="debounce-prev-key",e.DEFAULTS={debounce:300,throttle:300},e.DYNAMICS="d",e.STATIC="s",e.COMPONENTS="c"},function(t,e,n){"use strict";var i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.logError=function(t,e){console.error&&console.error(t,e)},e.closure=function(t){return"function"==typeof t?t:function(){return t}},e.clone=function(t){return JSON.parse(JSON.stringify(t))},e.detectDuplicateIds=function(){for(var t=new Set,e=document.querySelectorAll("*[id]"),n=0,i=e.length;n<i;n++)t.has(e[n].id)?console.error("Multiple IDs detected: "+e[n].id+". Ensure unique element ids."):t.add(e[n].id)},e.maybe=function(t,e){return t&&e(t)},e.isObject=function(t){return null!==t&&"object"==typeof t&&!(t instanceof Array)},e.isEqualObj=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},e.isEmpty=function(t){return 0==Object.keys(t).length},e.serializeForm=function(t,e){var n,o;void 0===e&&(e={});var s=new FormData(t),a=new URLSearchParams;try{for(var u=i(s.entries()),c=u.next();!c.done;c=u.next()){var d=r(c.value,2),l=d[0],h=d[1];a.append(l,h.toString())}}catch(t){n={error:t}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}for(var f in e)a.append(f,e[f]);return a.toString()},e.closestPhxBinding=function(t,e,n){do{if(t.matches("["+e+"]"))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType&&!(n&&n.isSameNode(t)||t.matches(o.PHX_VIEW_SELECTOR)));return null}},function(t,e,n){"use strict";var i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},r=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=o(n(6)),u=n(1);e.DOM={byId:function(t){return document.getElementById(t)||u.logError("no id found for "+t)},removeClass:function(t,e){t.classList.remove(e),0===t.classList.length&&t.removeAttribute("class")},all:function(t,e){return Array.from(t.querySelectorAll(e))},each:function(t,e,n){this.all(t,e).forEach(n)},findFirstComponentNode:function(t,e){return t.querySelector("["+s.PHX_COMPONENT+'="'+e+'"]')},findComponentNodeList:function(t,e){return this.all(t,"["+s.PHX_COMPONENT+'="'+e+'"]')},findPhxChildrenInFragment:function(t,e){var n=document.createElement("template");return n.innerHTML=t,this.findPhxChildren(n.content,e)},isPhxUpdate:function(t,e,n){return t.getAttribute&&n.indexOf(t.getAttribute(e))>=0},findPhxChildren:function(t,e){return this.all(t,s.PHX_VIEW_SELECTOR+"["+s.PHX_PARENT_ID+'="'+e+'"]')},findParentCIDs:function(t,e){var n=this,i=new Set(e);return e.reduce(function(e,i){var r="["+s.PHX_COMPONENT+'="'+i+'"] ['+s.PHX_COMPONENT+"]";return n.all(t,r).map(function(t){return parseInt(t.getAttribute(s.PHX_COMPONENT))}).forEach(function(t){return e.delete(t)}),e},i)},private:function(t,e){return t[s.PHX_PRIVATE]&&t[s.PHX_PRIVATE][e]},deletePrivate:function(t,e){t[s.PHX_PRIVATE]&&delete t[s.PHX_PRIVATE][e]},putPrivate:function(t,e,n){t[s.PHX_PRIVATE]||(t[s.PHX_PRIVATE]={}),t[s.PHX_PRIVATE][e]=n},copyPrivates:function(t,e){e[s.PHX_PRIVATE]&&(t[s.PHX_PRIVATE]=u.clone(e[s.PHX_PRIVATE]))},putTitle:function(t){var e=document.querySelector("title").dataset,n=e.prefix,i=e.suffix;document.title=""+(n||"")+t+(i||"")},debounce:function(t,e,n,i,r,o,a){var c=this,d=t.getAttribute(n),l=t.getAttribute(r);""===d&&(d=i),""===l&&(l=o);var h=d||l;switch(h){case null:return a();case"blur":if(this.private(t,s.DEBOUNCE_BLUR))return;return t.addEventListener("blur",function(){return a()}),void this.putPrivate(t,s.DEBOUNCE_BLUR,h);default:var f=parseInt(h);if(isNaN(f))return u.logError("invalid throttle/debounce value: "+h);if(l&&"keydown"===e.type){var p=this.private(t,s.DEBOUNCE_PREV_KEY);if(this.putPrivate(t,s.DEBOUNCE_PREV_KEY,e.key),p!==e.key)return a()}if(this.private(t,s.DEBOUNCE_TIMER))return;var v=function(e){l&&e.type===s.PHX_CHANGE_EVENT&&e.detail.triggeredBy.name===t.name||(clearTimeout(c.private(t,s.DEBOUNCE_TIMER)),c.deletePrivate(t,s.DEBOUNCE_TIMER))},E=function(){t.form&&(t.form.removeEventListener(s.PHX_CHANGE_EVENT,v),t.form.removeEventListener("submit",v)),t.removeEventListener("blur",c.private(t,s.DEBOUNCE_BLUR_TIMER)),c.deletePrivate(t,s.DEBOUNCE_BLUR_TIMER),c.deletePrivate(t,s.DEBOUNCE_TIMER),l||a()},y=function(){clearTimeout(c.private(t,s.DEBOUNCE_TIMER)),E()};this.putPrivate(t,s.DEBOUNCE_TIMER,setTimeout(E,f)),t.addEventListener("blur",y),this.putPrivate(t,s.DEBOUNCE_BLUR_TIMER,y),t.form&&(t.form.addEventListener(s.PHX_CHANGE_EVENT,v),t.form.addEventListener("submit",v)),l&&a()}},discardError:function(t,e,n){var i=e.getAttribute&&e.getAttribute(n),r=i&&t.querySelector("#"+i);r&&(this.private(r,s.PHX_HAS_FOCUSED)||this.private(r.form,s.PHX_HAS_SUBMITTED)||e.classList.add(s.PHX_NO_FEEDBACK_CLASS))},isPhxChild:function(t){return t.getAttribute&&t.getAttribute(s.PHX_PARENT_ID)},dispatchEvent:function(t,e,n){void 0===n&&(n={});var i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t.dispatchEvent(i)},cloneNode:function(t,e){if(void 0===e)return t.cloneNode(!0);var n=t.cloneNode(!1);return n.innerHTML=e,n},mergeAttrs:function(t,e,n){void 0===n&&(n=[]);for(var i=e.attributes,r=i.length-1;r>=0;r--){var o=i[r].name;n.indexOf(o)<0&&t.setAttribute(o,e.getAttribute(o))}var s=t.attributes;for(r=s.length-1;r>=0;r--){var a=s[r].name;e.hasAttribute(a)||t.removeAttribute(a)}},mergeFocusedInput:function(t,n){t instanceof HTMLSelectElement||e.DOM.mergeAttrs(t,n,["value"]),n.readOnly?t.setAttribute("readonly","true"):t.removeAttribute("readonly")},restoreFocus:function(t,n,i){if(e.DOM.isTextualInput(t)){var r=t.matches(":focus");t.readOnly&&t.blur(),r||t.focus(),(t.setSelectionRange&&"text"===t.type||"textarea"===t.type)&&t.setSelectionRange(n,i)}},isFormInput:function(t){return/^(?:input|select|textarea)$/i.test(t.tagName)},syncAttrsToProps:function(t){t instanceof HTMLInputElement&&s.CHECKABLE_INPUTS.indexOf(t.type.toLocaleLowerCase())>=0&&(t.checked=null!==t.getAttribute("checked"))},isTextualInput:function(t){return s.FOCUSABLE_INPUTS.indexOf(t.type)>=0},isNowTriggerFormExternal:function(t,e){return t.getAttribute&&null!==t.getAttribute(e)},undoRefs:function(t,n){var i=this;e.DOM.each(n,"["+s.PHX_REF+"]",function(e){return i.syncPendingRef(t,e,e)})},syncPendingRef:function(t,n,i){var r=n.getAttribute&&n.getAttribute(s.PHX_REF);if(null===r)return!0;var o=parseInt(r);return null!==t&&t>=o?([n,i].forEach(function(t){t.removeAttribute(s.PHX_REF),null!==t.getAttribute(s.PHX_READONLY)&&(t.readOnly=!1,t.removeAttribute(s.PHX_READONLY)),null!==t.getAttribute(s.PHX_DISABLED)&&(t.disabled=!1,t.removeAttribute(s.PHX_DISABLED)),s.PHX_EVENT_CLASSES.forEach(function(n){return e.DOM.removeClass(t,n)});var n=t.getAttribute(s.PHX_DISABLE_WITH_RESTORE);null!==n&&(t.innerText=n,t.removeAttribute(s.PHX_DISABLE_WITH_RESTORE))}),!0):(s.PHX_EVENT_CLASSES.forEach(function(t){n.classList.contains(t)&&i.classList.add(t)}),i.setAttribute(s.PHX_REF,n.getAttribute(s.PHX_REF)),!(e.DOM.isFormInput(n)||/submit/i.test(n.type)))}};var c=function(){function t(t,e,n,i,r,o){this.view=t,this.liveSocket=t.liveSocket,this.container=e,this.id=n,this.rootID=t.root.id,this.html=i,this.targetCID=r,this.ref=o,this.cidPatch="number"==typeof this.targetCID,this.callbacks={beforeadded:[],beforeupdated:[],beforediscarded:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[]}}return t.prototype.before=function(t,e){this.callbacks["before"+t].push(e)},t.prototype.after=function(t,e){this.callbacks["after"+t].push(e)},t.prototype.trackBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.callbacks["before"+t].forEach(function(t){return t.apply(void 0,r(e))})},t.prototype.trackAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.callbacks["after"+t].forEach(function(t){return t.apply(void 0,r(e))})},t.prototype.markPrunableContentForRemoval=function(){e.DOM.each(this.container,"[phx-update=append] > *, [phx-update=prepend] > *",function(t){t.setAttribute(s.PHX_REMOVE,"")})},t.prototype.perform=function(){var t=this,n=this.view,r=this.liveSocket,o=this.container,c=this.html,d=this.isCIDPatch()?this.targetCIDContainer():o;if(!this.isCIDPatch()||d){var l=r.getActiveElement(),h=l.selectionStart,f=l.selectionEnd,p=r.binding(s.PHX_UPDATE),v=r.binding(s.PHX_FEEDBACK_FOR),E=r.binding(s.PHX_TRIGGER_ACTION),y=[],g=[],m=[],_=r.time("premorph container prep",function(){return t.buildDiffHTML(o,c,p,d)});return this.trackBefore("added",o),this.trackBefore("updated",o,o),r.time("morphdom",function(){a.default(d,_,{childrenOnly:null===d.getAttribute(s.PHX_COMPONENT),onBeforeNodeAdded:function(n){return e.DOM.discardError(d,n,v),t.trackBefore("added",n),n},onNodeAdded:function(i){return e.DOM.isNowTriggerFormExternal(i,E)&&i.submit(),e.DOM.isPhxChild(i)&&n.ownsElement(i)&&t.trackAfter("phxChildAdded",i),y.push(i),i},onNodeDiscarded:function(e){t.trackAfter("discarded",e)},onBeforeNodeDiscarded:function(n){return!(!n.getAttribute||null===n.getAttribute(s.PHX_REMOVE))||!e.DOM.isPhxUpdate(n.parentNode,p,["append","prepend"])&&(!t.skipCIDSibling(n)&&(t.trackBefore("discarded",n),e.DOM.isPhxChild(n)?(r.destroyViewByEl(n),!0):void 0))},onElUpdated:function(t){e.DOM.isNowTriggerFormExternal(t,E)&&t.submit(),g.push(t)},onBeforeElUpdated:function(n,i){if(t.skipCIDSibling(i))return!1;if("ignore"===n.getAttribute(p))return t.trackBefore("updated",n,i),e.DOM.mergeAttrs(n,i),g.push(n),!1;if("number"===n.type&&n.validity&&n.validity.badInput)return!1;if(!e.DOM.syncPendingRef(t.ref,n,i))return!1;if(e.DOM.isPhxChild(i)){var r=n.getAttribute(s.PHX_STATIC);return e.DOM.mergeAttrs(n,i),n.setAttribute(s.PHX_STATIC,r),n.setAttribute(s.PHX_ROOT_ID,t.rootID),!1}if(e.DOM.copyPrivates(i,n),e.DOM.discardError(d,i,v),l&&n.isSameNode(l)&&e.DOM.isFormInput(n)&&!t.forceFocusedSelectUpdate(n,i))return t.trackBefore("updated",n,i),e.DOM.mergeFocusedInput(n,i),e.DOM.syncAttrsToProps(n),g.push(n),!1;if(e.DOM.isPhxUpdate(i,p,["append","prepend"])){var o="append"===i.getAttribute(p),a=Array.from(n.children).map(function(t){return t.id}),u=Array.from(i.children).map(function(t){return t.id});o&&!u.find(function(t){return a.indexOf(t)>=0})||m.push([i.id,a])}return e.DOM.syncAttrsToProps(i),t.trackBefore("updated",n,i),!0}})}),r.isDebugEnabled()&&u.detectDuplicateIds(),m.length>0&&r.time("post-morph append/prepend restoration",function(){m.forEach(function(t){var n,r=i(t,2),o=r[0],s=r[1],a=e.DOM.byId(o);"append"===(null===(n=a)||void 0===n?void 0:n.getAttribute(p))?s.reverse().forEach(function(t){u.maybe(document.getElementById(t),function(t){return a.insertBefore(t,a.firstChild)})}):s.forEach(function(t){u.maybe(document.getElementById(t),function(t){return a.appendChild(t)})})})}),r.silenceEvents(function(){return e.DOM.restoreFocus(l,h,f)}),e.DOM.dispatchEvent(document,"phx:update"),y.forEach(function(e){return t.trackAfter("added",e)}),g.forEach(function(e){return t.trackAfter("updated",e)}),!0}},t.prototype.forceFocusedSelectUpdate=function(t,e){return!0===t.multiple||t.innerHTML!=e.innerHTML},t.prototype.isCIDPatch=function(){return this.cidPatch},t.prototype.skipCIDSibling=function(t){return t.nodeType===Node.ELEMENT_NODE&&null!==t.getAttribute(s.PHX_SKIP)},t.prototype.targetCIDContainer=function(){if(this.isCIDPatch()){var t=i(e.DOM.findComponentNodeList(this.container,this.targetCID)),n=t[0];return 0===t.slice(1).length?n:n&&n.parentNode}},t.prototype.buildDiffHTML=function(t,n,r,o){var a=this,u=this.isCIDPatch(),c=u&&o.getAttribute(s.PHX_COMPONENT)===this.targetCID.toString();if(!u||c)return n;var d=null,l=document.createElement("template");d=e.DOM.cloneNode(o);var h=i(e.DOM.findComponentNodeList(d,this.targetCID)),f=h[0],p=h.slice(1);return l.innerHTML=n,p.forEach(function(t){return t.remove()}),Array.from(d.childNodes).forEach(function(t){t.nodeType===Node.ELEMENT_NODE&&t.getAttribute(s.PHX_COMPONENT)!==a.targetCID.toString()&&(t.setAttribute(s.PHX_SKIP,""),t.innerHTML="")}),Array.from(l.content.childNodes).forEach(function(t){return d.insertBefore(t,f)}),f.remove(),d.outerHTML},t}();e.DOMPatch=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.Browser={canPushState:function(){return void 0!==history.pushState},dropLocal:function(t,e){return window.localStorage.removeItem(this.localKey(t,e))},updateLocal:function(t,e,n,i){var r=this.getLocal(t,e),o=this.localKey(t,e),s=null===r?n:i(r);return window.localStorage.setItem(o,JSON.stringify(s)),s},getLocal:function(t,e){return JSON.parse(window.localStorage.getItem(this.localKey(t,e)))},fetchPage:function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=i.PUSH_TIMEOUT,n.setRequestHeader("content-type","text/html"),n.setRequestHeader("cache-control","max-age=0, no-cache, no-store, must-revalidate, post-check=0, pre-check=0"),n.setRequestHeader(i.LINK_HEADER,"live-link"),n.onerror=function(){return e(400)},n.ontimeout=function(){return e(504)},n.onreadystatechange=function(){if(4===n.readyState)return"live-link"!==n.getResponseHeader(i.LINK_HEADER)?e(400):200!==n.status?e(n.status):void e(200,n.responseText)},n.send()},pushState:function(t,e,n){if(this.canPushState()){if(n!==window.location.href){history[t+"State"](e,"",n||null);var i=this.getHashTargetEl(window.location.hash);i?i.scrollIntoView():"redirect"===e.type&&window.scroll(0,0)}}else this.redirect(n)},setCookie:function(t,e){document.cookie=t+"="+e},getCookie:function(t){return document.cookie.replace(new RegExp("(?:(?:^|.*;s*)"+t+"s*=s*([^;]*).*$)|^.*$"),"$1")},redirect:function(t,n){n&&e.Browser.setCookie("__phoenix_flash__",n+"; max-age=60000; path=/"),window.location=t},localKey:function(t,e){return t+"-"+e},getHashTargetEl:function(t){if(""!==t.toString())return document.getElementById(t)||document.querySelector('a[name="'+t.substring(1)+'"]')}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(1),o=function(){function t(t,e){this.viewId=t,this.replaceRendered(e)}return t.prototype.parentViewId=function(){return this.viewId},t.prototype.toString=function(t){return this.recursiveToString(this.rendered,this.rendered[i.COMPONENTS],t)},t.prototype.recursiveToString=function(t,e,n){void 0===e&&(e=t[i.COMPONENTS]||{});var r={buffer:"",components:e,onlyCids:n=n?new Set(n):null};return this.toOutputBuffer(t,r),r.buffer},t.prototype.componentCIDs=function(t){return Object.keys(t[i.COMPONENTS]||{}).map(function(t){return parseInt(t)})},t.prototype.isComponentOnlyDiff=function(t){return!!t[i.COMPONENTS]&&0===Object.keys(t).filter(function(t){return"title"!==t&&t!==i.COMPONENTS}).length},t.prototype.mergeDiff=function(t){!t[i.COMPONENTS]&&this.isNewFingerprint(t)?this.replaceRendered(t):this.recursiveMerge(this.rendered,t)},t.prototype.recursiveMerge=function(t,e){var n=this;Object.keys(e).forEach(function(o){var s=e[o],a=t[o];r.isObject(s)&&r.isObject(a)?(a[i.DYNAMICS]&&!s[i.DYNAMICS]&&delete a[i.DYNAMICS],n.recursiveMerge(a,s)):t[o]=s})},t.prototype.componentToString=function(t){return this.recursiveCIDToString(this.rendered[i.COMPONENTS],t)},t.prototype.pruneCIDs=function(t){var e=this;t.forEach(function(t){return delete e.rendered[i.COMPONENTS][t]})},t.prototype.get=function(){return this.rendered},t.prototype.replaceRendered=function(t){this.rendered=t,this.rendered[i.COMPONENTS]=this.rendered[i.COMPONENTS]||{}},t.prototype.isNewFingerprint=function(t){return void 0===t&&(t={}),!!t[i.STATIC]},t.prototype.toOutputBuffer=function(t,e){if(t[i.DYNAMICS])return this.comprehensionToBuffer(t,e);var n=t[i.STATIC];e.buffer+=n[0];for(var r=1;r<n.length;r++)this.dynamicToBuffer(t[r-1],e),e.buffer+=n[r]},t.prototype.comprehensionToBuffer=function(t,e){for(var n=t[i.DYNAMICS],r=t[i.STATIC],o=0;o<n.length;o++){var s=n[o];e.buffer+=r[0];for(var a=1;a<r.length;a++)this.dynamicToBuffer(s[a-1],e),e.buffer+=r[a]}},t.prototype.dynamicToBuffer=function(t,e){"number"==typeof t?e.buffer+=this.recursiveCIDToString(e.components,t,e.onlyCids):r.isObject(t)?this.toOutputBuffer(t,e):e.buffer+=t},t.prototype.recursiveCIDToString=function(t,e,n){var o=this,s=t[e]||r.logError("no component for CID "+e,t),a=document.createElement("template");a.innerHTML=this.recursiveToString(s,t,n);var u=a.content,c=n&&!n.has(e);return Array.from(u.children).forEach(function(t,n){if(t.nodeType===Node.ELEMENT_NODE)t.setAttribute(i.PHX_COMPONENT,e),t.id||(t.id=o.parentViewId()+"-"+e+"-"+n),c&&(t.setAttribute(i.PHX_SKIP,""),t.innerHTML="");else if(""!==t.nodeValue.trim()){r.logError('only HTML element tags are allowed at the root of components.\n\ngot: "'+t.nodeValue.trim()+'"\n\nwithin:\n',a.innerHTML.trim());var s=document.createElement("span");s.innerText=t.nodeValue,s.setAttribute(i.PHX_COMPONENT,e),t.replaceWith(s)}else t.remove()}),a.innerHTML},t}();e.Rendered=o},function(t,e,n){"use strict";var i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},r=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(2),a=n(3),u=n(1),c=n(4),d=function(){function t(t,e,n,i,r){var s=this;this.liveSocket=e,this.flash=r,this.parent=n,this.root=n?n.root:this,this.el=t,this.id=this.el.id,this.view=this.el.getAttribute(o.PHX_VIEW),this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.href=i,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(){},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.children=this.parent?null:{},this.root.children[this.id]={},this.channel=this.liveSocket.channel("lv:"+this.id,function(){return{url:s.href,params:s.liveSocket.params(s.view),session:s.getSession(),static:s.getStatic(),flash:s.flash,joins:s.joinCount}}),this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel()}return t.prototype.isMain=function(){return this.liveSocket.main===this},t.prototype.name=function(){return this.view},t.prototype.isConnected=function(){return this.channel.canPush()},t.prototype.getSession=function(){return this.el.getAttribute(o.PHX_SESSION)},t.prototype.getStatic=function(){var t=this.el.getAttribute(o.PHX_STATIC);return""===t?null:t},t.prototype.destroy=function(t){var e=this;void 0===t&&(t=function(){}),this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);var n=function(){for(var n in t(),e.viewHooks)e.destroyHook(e.viewHooks[n])};this.log("destroyed",function(){return["the child has been removed from the parent"]}),this.channel.leave().receive("ok",n).receive("error",n).receive("timeout",n)},t.prototype.setContainerClasses=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.el.classList.remove(o.PHX_CONNECTED_CLASS,o.PHX_DISCONNECTED_CLASS,o.PHX_ERROR_CLASS),(t=this.el.classList).add.apply(t,r(e))},t.prototype.isLoading=function(){return this.el.classList.contains(o.PHX_DISCONNECTED_CLASS)},t.prototype.showLoader=function(t){var e=this;if(clearTimeout(this.loaderTimer),t)this.loaderTimer=window.setTimeout(function(){return e.showLoader()},t);else{for(var n in this.viewHooks)this.viewHooks[n].__trigger__("disconnected");this.setContainerClasses(o.PHX_DISCONNECTED_CLASS)}},t.prototype.hideLoader=function(){clearTimeout(this.loaderTimer),this.setContainerClasses(o.PHX_CONNECTED_CLASS)},t.prototype.triggerReconnected=function(){for(var t in this.viewHooks)this.viewHooks[t].__trigger__("reconnected")},t.prototype.log=function(t,e){this.liveSocket.log(this,t,e)},t.prototype.onJoin=function(t){var e=this,n=t.rendered;this.joinCount++,this.childJoins=0,this.joinPending=!0,this.flash=null,this.log("join",function(){return["",n]}),n.title&&s.DOM.putTitle(n.title),a.Browser.dropLocal(this.name(),o.CONSECUTIVE_RELOADS),this.rendered=new c.Rendered(this.id,n);var i=this.renderContainer(null,"join");this.dropPendingRefs();var r=this.formsForRecovery(i);this.joinCount>1&&r.length>0?r.forEach(function(t,n){e.pushFormRecovery(t,function(t){n===r.length-1&&e.onJoinComplete(t,i)})}):this.onJoinComplete(t,i)},t.prototype.dropPendingRefs=function(){s.DOM.each(this.el,"["+o.PHX_REF+"]",function(t){return t.removeAttribute(o.PHX_REF)})},t.prototype.onJoinComplete=function(t,e){var n=this,i=t.live_patch;if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(i,e);0===s.DOM.findPhxChildrenInFragment(e,this.id).filter(function(t){return n.joinChild(t)}).length?this.parent?(this.root.pendingJoinOps.push([this,function(){return n.applyJoinPatch(i,e)}]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(i,e)):this.root.pendingJoinOps.push([this,function(){return n.applyJoinPatch(i,e)}])},t.prototype.attachTrueDocEl=function(){this.el=s.DOM.byId(this.id),this.el.setAttribute(o.PHX_ROOT_ID,this.root.id)},t.prototype.applyJoinPatch=function(t,e){var n=this;this.attachTrueDocEl();var i=new s.DOMPatch(this,this.el,this.id,e,null);if(i.markPrunableContentForRemoval(),this.joinPending=!1,this.performPatch(i),this.joinNewChildren(),s.DOM.each(this.el,"["+this.binding(o.PHX_HOOK)+"]",function(t){var e=n.addHook(t);e&&e.__trigger__("mounted")}),this.applyPendingUpdates(),t){var r=t.kind,a=t.to;this.liveSocket.historyPatch(a,r)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()},t.prototype.performPatch=function(t){var e=this,n=[],i=!1,r=new Set;return t.after("added",function(t){var n=e.addHook(t);n&&n.__trigger__("mounted")}),t.after("phxChildAdded",function(){return i=!0}),t.before("updated",function(t,n){var i=e.getHook(t),s=i&&"ignore"===t.getAttribute(e.binding(o.PHX_UPDATE));!i||t.isEqualNode(n)||s&&u.isEqualObj(t.dataset,n.dataset)||(r.add(t.id),i.__trigger__("beforeUpdate"))}),t.after("updated",function(t){var n=e.getHook(t);n&&r.has(t.id)&&n.__trigger__("updated")}),t.before("discarded",function(t){var n=e.getHook(t);n&&n.__trigger__("beforeDestroy")}),t.after("discarded",function(t){var i=e.componentID(t);"number"==typeof i&&-1===n.indexOf(i)&&n.push(i);var r=e.getHook(t);r&&e.destroyHook(r)}),t.perform(),this.maybePushComponentsDestroyed(n),i},t.prototype.joinNewChildren=function(){var t=this;s.DOM.findPhxChildren(this.el,this.id).forEach(function(e){return t.joinChild(e)})},t.prototype.getChildById=function(t){return this.root.children[this.id][t]},t.prototype.getDescendentByEl=function(t){return t.id===this.id?this:this.children[t.getAttribute(o.PHX_PARENT_ID)][t.id]},t.prototype.destroyDescendent=function(t){var e=this;Object.keys(this.root.children).forEach(function(n){Object.keys(e.root.children[n]).forEach(function(i){if(i===t)return e.root.children[n][i].destroy()})})},t.prototype.joinChild=function(e){if(!this.getChildById(e.id)){var n=new t(e,this.liveSocket,this);return this.root.children[this.id][n.id]=n,n.join(),this.childJoins++,!0}},t.prototype.isJoinPending=function(){return this.joinPending},t.prototype.ackJoin=function(t){this.childJoins--,0===this.childJoins&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())},t.prototype.onAllChildJoinsComplete=function(){this.joinCallback(),this.pendingJoinOps.forEach(function(t){var e=i(t,2),n=e[0],r=e[1];n.isDestroyed()||r()}),this.pendingJoinOps=[]},t.prototype.update=function(t,e,n){var i=this;if(!u.isEmpty(t)||null!==n){if(t.title&&s.DOM.putTitle(t.title),this.isJoinPending()||this.liveSocket.hasPendingLink())return this.pendingDiffs.push({diff:t,cid:e,ref:n});this.log("update",function(){return["",t]}),this.rendered.mergeDiff(t);var r=!1;"number"==typeof e?this.liveSocket.time("component ack patch complete",function(){i.componentPatch(t[o.COMPONENTS][e],e,n)&&(r=!0)}):this.rendered.isComponentOnlyDiff(t)?this.liveSocket.time("component patch complete",function(){s.DOM.findParentCIDs(i.el,i.rendered.componentCIDs(t)).forEach(function(e){i.componentPatch(t[o.COMPONENTS][e],e,n)&&(r=!0)})}):u.isEmpty(t)||this.liveSocket.time("full patch complete",function(){var e=i.renderContainer(t,"update"),o=new s.DOMPatch(i,i.el,i.id,e,null,n);r=i.performPatch(o)}),s.DOM.undoRefs(n,this.el),r&&this.joinNewChildren()}},t.prototype.renderContainer=function(t,e){var n=this;return this.liveSocket.time("toString diff ("+e+")",function(){var e=n.el.tagName,i=t?n.rendered.componentCIDs(t):null;return"<"+e+">"+n.rendered.toString(i)+"</"+e+">"})},t.prototype.componentPatch=function(t,e,n){if(u.isEmpty(t))return!1;var i=this.rendered.componentToString(e),r=new s.DOMPatch(this,this.el,this.id,i,e,n);return this.performPatch(r)},t.prototype.getHook=function(t){return this.viewHooks[h.elementID(t)]},t.prototype.addHook=function(t){if(!h.elementID(t)&&t.getAttribute){var e=t.getAttribute(this.binding(o.PHX_HOOK));if(!e||this.ownsElement(t)){var n=this.liveSocket.getHookCallbacks(e);if(n){var i=new h(this,t,n);return this.viewHooks[h.elementID(i.el)]=i,i}null!==e&&u.logError('unknown hook found for "'+e+'"',t)}}},t.prototype.destroyHook=function(t){t.__trigger__("destroyed"),delete this.viewHooks[h.elementID(t.el)]},t.prototype.applyPendingUpdates=function(){var t=this;this.pendingDiffs.forEach(function(e){var n=e.diff,i=e.cid,r=e.ref;return t.update(n,i,r)}),this.pendingDiffs=[]},t.prototype.onChannel=function(t,e){var n=this;this.liveSocket.onChannel(this.channel,t,function(t){n.isJoinPending()?n.root.pendingJoinOps.push([n,function(){return e(t)}]):e(t)})},t.prototype.bindChannel=function(){var t=this;this.onChannel("diff",function(e){return t.update(e)}),this.onChannel("redirect",function(e){var n=e.to,i=e.flash;return t.onRedirect({to:n,flash:i})}),this.onChannel("live_patch",function(e){return t.onLivePatch(e)}),this.onChannel("live_redirect",function(e){return t.onLiveRedirect(e)}),this.onChannel("session",function(e){var n=e.token;return t.el.setAttribute(o.PHX_SESSION,n)}),this.channel.onError(function(e){return t.onError(e)}),this.channel.onClose(function(){return t.onError({reason:"closed"})})},t.prototype.destroyAllChildren=function(){var t=this;Object.keys(this.root.children[this.id]).forEach(function(e){t.getChildById(e).destroy()})},t.prototype.onLiveRedirect=function(t){var e=t.to,n=t.kind,i=t.flash,r=this.expandURL(e);this.liveSocket.historyRedirect(r,n,i)},t.prototype.onLivePatch=function(t){var e=t.to,n=t.kind;this.href=this.expandURL(e),this.liveSocket.historyPatch(e,n)},t.prototype.expandURL=function(t){return t.startsWith("/")?window.location.protocol+"//"+window.location.host+t:t},t.prototype.onRedirect=function(t){var e=t.to,n=t.flash;this.liveSocket.redirect(e,n)},t.prototype.isDestroyed=function(){return this.destroyed},t.prototype.join=function(t){var e=this;this.parent||(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=function(){return t&&t(e,e.joinCount)},this.liveSocket.wrapPush(function(){return e.channel.join().receive("ok",function(t){return e.onJoin(t)}).receive("error",function(t){return e.onJoinError(t)}).receive("timeout",function(){return e.onJoinError({reason:"timeout"})})})},t.prototype.onJoinError=function(t){return(t.redirect||t.live_redirect)&&this.channel.leave(),t.redirect?this.onRedirect(t.redirect):t.live_redirect?this.onLiveRedirect(t.live_redirect):(this.log("error",function(){return["unable to join",t]}),this.liveSocket.reloadWithJitter(this))},t.prototype.onError=function(t){if(this.isJoinPending())return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.log("error",function(){return["view crashed",t]}),this.liveSocket.onViewError(this),document.activeElement.blur(),this.liveSocket.isUnloaded()?this.showLoader(o.BEFORE_UNLOAD_LOADER_TIMEOUT):this.displayError()},t.prototype.displayError=function(){this.isMain()&&s.DOM.dispatchEvent(window,"phx:page-loading-start",{to:this.href,kind:"error"}),this.showLoader(),this.setContainerClasses(o.PHX_DISCONNECTED_CLASS,o.PHX_ERROR_CLASS)},t.prototype.pushWithReply=function(t,e,n,r){var s=this;void 0===r&&(r=function(t){});var a=i(t?t():[null,[]],2),u=a[0],c=i(a[1],1)[0],d=function(){};return c&&null!==c.getAttribute(this.binding(o.PHX_PAGE_LOADING))&&(d=this.liveSocket.withPageLoading({kind:"element",target:c})),"number"!=typeof n.cid&&delete n.cid,this.liveSocket.wrapPush(function(){return s.channel.push(e,n,o.PUSH_TIMEOUT).receive("ok",function(t){(t.diff||null!==u)&&s.update(t.diff||{},n.cid,u),t.redirect&&s.onRedirect(t.redirect),t.live_patch&&s.onLivePatch(t.live_patch),t.live_redirect&&s.onLiveRedirect(t.live_redirect),d(),r(t)})})},t.prototype.putRef=function(t,e){var n=this.ref++,i=this.binding(o.PHX_DISABLE_WITH);return t.forEach(function(t){t.classList.add("phx-"+e+"-loading"),t.setAttribute(o.PHX_REF,String(n));var r=t.getAttribute(i);null!==r&&(t.getAttribute(o.PHX_DISABLE_WITH_RESTORE)||t.setAttribute(o.PHX_DISABLE_WITH_RESTORE,t.innerText),t.innerText=r)}),[n,t]},t.prototype.componentID=function(t){var e=t.getAttribute&&t.getAttribute(o.PHX_COMPONENT);return e?parseInt(e):null},t.prototype.targetComponentID=function(t,e){return t.getAttribute(this.binding("target"))?this.closestComponentID(e):null},t.prototype.closestComponentID=function(t){var e=this;return t?u.maybe(t.closest("["+o.PHX_COMPONENT+"]"),function(t){return e.ownsElement(t)&&e.componentID(t)}):null},t.prototype.pushHookEvent=function(t,e,n){this.pushWithReply(null,"event",{type:"hook",event:e,value:n,cid:this.closestComponentID(t)})},t.prototype.extractMeta=function(t,e){for(var n=this.binding("value-"),i=0;i<t.attributes.length;i++){var r=t.attributes[i].name;r.startsWith(n)&&(e[r.replace(n,"")]=t.getAttribute(r))}return void 0!==t.value&&(e.value=t.value,"INPUT"===t.tagName&&o.CHECKABLE_INPUTS.indexOf(t.type)>=0&&!t.checked&&delete e.value),e},t.prototype.pushEvent=function(t,e,n,i,r){var o=this;this.pushWithReply(function(){return o.putRef([e],t)},"event",{type:t,event:i,value:this.extractMeta(e,r),cid:this.targetComponentID(e,n)})},t.prototype.pushKey=function(t,e,n,i,r){var o=this;this.pushWithReply(function(){return o.putRef([t],n)},"event",{type:n,event:i,value:this.extractMeta(t,r),cid:this.targetComponentID(t,e)})},t.prototype.pushInput=function(t,e,n,i,r){var a=this;s.DOM.dispatchEvent(t.form,o.PHX_CHANGE_EVENT,{triggeredBy:t}),this.pushWithReply(function(){return a.putRef([t,t.form],"change")},"event",{type:"form",event:n,value:u.serializeForm(t.form,{_target:i.name}),cid:this.targetComponentID(t.form,e)},r)},t.prototype.pushFormSubmit=function(t,e,n,i){var r=this,a=function(t){return!u.closestPhxBinding(t,r.binding(o.PHX_UPDATE)+"=ignore",t.form)};this.pushWithReply(function(){var e=s.DOM.all(t,"["+r.binding(o.PHX_DISABLE_WITH)+"]"),n=s.DOM.all(t,"button").filter(a),i=s.DOM.all(t,"input").filter(a);return n.forEach(function(t){t.setAttribute(o.PHX_DISABLED,t.disabled.toString()),t.disabled=!0}),i.forEach(function(t){t.setAttribute(o.PHX_READONLY,t.readOnly.toString()),t.readOnly=!0}),t.setAttribute(r.binding(o.PHX_PAGE_LOADING),""),r.putRef([t].concat(e).concat(n).concat(i),"submit")},"event",{type:"form",event:n,value:u.serializeForm(t),cid:this.targetComponentID(t,e)},i)},t.prototype.pushFormRecovery=function(t,e){var n=this;this.liveSocket.withinOwners(t,function(i,r){var s=t.elements[0],a=t.getAttribute(n.binding(o.PHX_AUTO_RECOVER))||t.getAttribute(n.binding("change"));i.pushInput(s,r,a,s,e)})},t.prototype.pushLinkPatch=function(t,e,n){var i=this;this.isLoading()||this.showLoader(this.liveSocket.loaderTimeout);var r=this.liveSocket.setPendingLink(t),o=e?function(){return i.putRef([e],"click")}:null;this.pushWithReply(o,"link",{url:t},function(e){e.link_redirect?i.liveSocket.replaceMain(t,null,n,r):i.liveSocket.commitPendingLink(r)&&(i.href=t,i.applyPendingUpdates(),i.hideLoader(),i.triggerReconnected(),n&&n())}).receive("timeout",function(){return i.liveSocket.redirect(window.location.href)})},t.prototype.formsForRecovery=function(t){var e=this,n=this.binding("change"),i=document.createElement("template");return i.innerHTML=t,s.DOM.all(this.el,"form["+n+"]").filter(function(t){return e.ownsElement(t)}).filter(function(t){return"ignore"!==t.getAttribute(e.binding(o.PHX_AUTO_RECOVER))}).filter(function(t){return i.content.querySelector("form["+n+'="'+t.getAttribute(n)+'"]')})},t.prototype.maybePushComponentsDestroyed=function(t){var e=this,n=t.filter(function(t){return 0===s.DOM.findComponentNodeList(e.el,t).length});n.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:n},function(){e.rendered.pruneCIDs(n)})},t.prototype.ownsElement=function(t){return t.getAttribute(o.PHX_PARENT_ID)===this.id||u.maybe(t.closest(o.PHX_VIEW_SELECTOR),function(t){return t.id})===this.id},t.prototype.submitForm=function(t,e,n){var i=this;s.DOM.putPrivate(t,o.PHX_HAS_SUBMITTED,!0),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(t,e,n,function(){i.liveSocket.restorePreviouslyActiveFocus()})},t.prototype.binding=function(t){return this.liveSocket.binding(t)},t}();e.View=d;var l=1,h=function(){function t(e,n,i){var r=this;this.__view=e,this.__liveSocket=e.liveSocket,this.__callbacks=i,this.el=n,this.viewName=e.name(),this.el.phxHookId=t.makeID(),Object.keys(this.__callbacks).forEach(function(t){r[t]=r.__callbacks[t]})}return t.makeID=function(){return l++},t.elementID=function(t){return t.phxHookId},t.prototype.pushEvent=function(t,e){void 0===e&&(e={}),this.__view.pushHookEvent(null,t,e)},t.prototype.pushEventTo=function(t,e,n){void 0===n&&(n={}),this.__liveSocket.withinTargets(null,t,function(t,i){t.pushHookEvent(i,e,n)})},t.prototype.__trigger__=function(t){var e=this.__callbacks[t];e&&e.call(this)},t}()},function(t,e,n){"use strict";n.r(e);var i,r=11;var o="http://www.w3.org/1999/xhtml",s="undefined"==typeof document?void 0:document,a=!!s&&"content"in s.createElement("template"),u=!!s&&s.createRange&&"createContextualFragment"in s.createRange();function c(t){return t=t.trim(),a?function(t){var e=s.createElement("template");return e.innerHTML=t,e.content.childNodes[0]}(t):u?function(t){return i||(i=s.createRange()).selectNode(s.body),i.createContextualFragment(t).childNodes[0]}(t):function(t){var e=s.createElement("body");return e.innerHTML=t,e.childNodes[0]}(t)}function d(t,e){var n=t.nodeName,i=e.nodeName;return n===i||!!(e.actualize&&n.charCodeAt(0)<91&&i.charCodeAt(0)>90)&&n===i.toUpperCase()}function l(t,e,n){t[n]!==e[n]&&(t[n]=e[n],t[n]?t.setAttribute(n,""):t.removeAttribute(n))}var h={OPTION:function(t,e){var n=t.parentNode;if(n){var i=n.nodeName.toUpperCase();"OPTGROUP"===i&&(i=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==i||n.hasAttribute("multiple")||(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),n.selectedIndex=-1)}l(t,e,"selected")},INPUT:function(t,e){l(t,e,"checked"),l(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var n=e.value;t.value!==n&&(t.value=n);var i=t.firstChild;if(i){var r=i.nodeValue;if(r==n||!n&&r==t.placeholder)return;i.nodeValue=n}},SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var n,i,r=-1,o=0,s=t.firstChild;s;)if("OPTGROUP"===(i=s.nodeName&&s.nodeName.toUpperCase()))s=(n=s).firstChild;else{if("OPTION"===i){if(s.hasAttribute("selected")){r=o;break}o++}!(s=s.nextSibling)&&n&&(s=n.nextSibling,n=null)}t.selectedIndex=r}}},f=1,p=11,v=3,E=8;function y(){}function g(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}var m=function(t){return function(e,n,i){if(i||(i={}),"string"==typeof n)if("#document"===e.nodeName||"HTML"===e.nodeName){var r=n;(n=s.createElement("html")).innerHTML=r}else n=c(n);var a=i.getNodeKey||g,u=i.onBeforeNodeAdded||y,l=i.onNodeAdded||y,m=i.onBeforeElUpdated||y,_=i.onElUpdated||y,b=i.onBeforeNodeDiscarded||y,P=i.onNodeDiscarded||y,S=i.onBeforeElChildrenUpdated||y,O=!0===i.childrenOnly,A=Object.create(null),C=[];function T(t){C.push(t)}function D(t,e,n){!1!==b(t)&&(e&&e.removeChild(t),P(t),function t(e,n){if(e.nodeType===f)for(var i=e.firstChild;i;){var r=void 0;n&&(r=a(i))?T(r):(P(i),i.firstChild&&t(i,n)),i=i.nextSibling}}(t,n))}function I(t){l(t);for(var e=t.firstChild;e;){var n=e.nextSibling,i=a(e);if(i){var r=A[i];r&&d(e,r)&&(e.parentNode.replaceChild(r,e),N(r,e))}I(e),e=n}}function N(e,n,i){var r=a(n);if(r&&delete A[r],!i){if(!1===m(e,n))return;if(t(e,n),_(e),!1===S(e,n))return}"TEXTAREA"!==e.nodeName?function(t,e){var n,i,r,o,c,l=e.firstChild,p=t.firstChild;t:for(;l;){for(o=l.nextSibling,n=a(l);p;){if(r=p.nextSibling,l.isSameNode&&l.isSameNode(p)){l=o,p=r;continue t}i=a(p);var y=p.nodeType,g=void 0;if(y===l.nodeType&&(y===f?(n?n!==i&&((c=A[n])?r===c?g=!1:(t.insertBefore(c,p),i?T(i):D(p,t,!0),p=c):g=!1):i&&(g=!1),(g=!1!==g&&d(p,l))&&N(p,l)):y!==v&&y!=E||(g=!0,p.nodeValue!==l.nodeValue&&(p.nodeValue=l.nodeValue))),g){l=o,p=r;continue t}i?T(i):D(p,t,!0),p=r}if(n&&(c=A[n])&&d(c,l))t.appendChild(c),N(c,l);else{var m=u(l);!1!==m&&(m&&(l=m),l.actualize&&(l=l.actualize(t.ownerDocument||s)),t.appendChild(l),I(l))}l=o,p=r}!function(t,e,n){for(;e;){var i=e.nextSibling;(n=a(e))?T(n):D(e,t,!0),e=i}}(t,p,i);var _=h[t.nodeName];_&&_(t,e)}(e,n):h.TEXTAREA(e,n)}!function t(e){if(e.nodeType===f||e.nodeType===p)for(var n=e.firstChild;n;){var i=a(n);i&&(A[i]=n),t(n),n=n.nextSibling}}(e);var H=e,L=H.nodeType,w=n.nodeType;if(!O)if(L===f)w===f?d(e,n)||(P(e),H=function(t,e){for(var n=t.firstChild;n;){var i=n.nextSibling;e.appendChild(n),n=i}return e}(e,function(t,e){return e&&e!==o?s.createElementNS(e,t):s.createElement(t)}(n.nodeName,n.namespaceURI))):H=n;else if(L===v||L===E){if(w===L)return H.nodeValue!==n.nodeValue&&(H.nodeValue=n.nodeValue),H;H=n}if(H===n)P(e);else{if(n.isSameNode&&n.isSameNode(H))return;if(N(H,n,O),C)for(var k=0,R=C.length;k<R;k++){var M=A[C[k]];M&&D(M,M.parentNode,!1)}}return!O&&H!==e&&e.parentNode&&(H.actualize&&(H=H.actualize(e.ownerDocument||s)),e.parentNode.replaceChild(H,e)),H}}(function(t,e){var n,i,o,s,a=e.attributes;if(e.nodeType!==r&&t.nodeType!==r){for(var u=a.length-1;u>=0;u--)i=(n=a[u]).name,o=n.namespaceURI,s=n.value,o?(i=n.localName||i,t.getAttributeNS(o,i)!==s&&("xmlns"===n.prefix&&(i=n.name),t.setAttributeNS(o,i,s))):t.getAttribute(i)!==s&&t.setAttribute(i,s);for(var c=t.attributes,d=c.length-1;d>=0;d--)i=(n=c[d]).name,(o=n.namespaceURI)?(i=n.localName||i,e.hasAttributeNS(o,i)||t.removeAttributeNS(o,i)):e.hasAttribute(i)||t.removeAttribute(i)}});e.default=m},function(t,e,n){"use strict";var i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(3),a=n(1),u=n(2),c=n(5);e.debug=function(t,e,n,i){t.liveSocket.isDebugEnabled()&&console.log(t.id+" "+e+": "+n+" - ",i)};var d=function(){function t(t,e,n){var i=this;if(void 0===n&&(n={bindingPrefix:void 0,params:void 0,viewLogger:void 0,defaults:void 0,hooks:"",loaderTimeout:0}),this.unloaded=!1,!e||"Object"===e.constructor.name)throw new Error('\n      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:\n\n          import {Socket} from "phoenix"\n          import {LiveSocket} from "phoenix_live_view"\n          let liveSocket = new LiveSocket("/live", Socket, {...})\n      ');this.socket=new e(t,n),this.bindingPrefix=n.bindingPrefix||o.BINDING_PREFIX,this.opts=n,this.params=a.closure(n.params||{}),this.viewLogger=n.viewLogger,this.defaults=Object.assign(a.clone(o.DEFAULTS),n.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.linkRef=0,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=a.clone(window.location),this.hooks=n.hooks||{},this.loaderTimeout=n.loaderTimeout||o.LOADER_TIMEOUT,this.socket.onOpen(function(){i.isUnloaded()&&(i.destroyAllViews(),i.joinRootViews()),i.unloaded=!1}),window.addEventListener("unload",function(){i.unloaded=!0})}return t.prototype.isProfileEnabled=function(){return"true"===sessionStorage.getItem(o.PHX_LV_PROFILE)},t.prototype.isDebugEnabled=function(){return"true"===sessionStorage.getItem(o.PHX_LV_DEBUG)},t.prototype.enableDebug=function(){sessionStorage.setItem(o.PHX_LV_DEBUG,"true")},t.prototype.enableProfiling=function(){sessionStorage.setItem(o.PHX_LV_PROFILE,"true")},t.prototype.disableDebug=function(){sessionStorage.removeItem(o.PHX_LV_DEBUG)},t.prototype.disableProfiling=function(){sessionStorage.removeItem(o.PHX_LV_PROFILE)},t.prototype.enableLatencySim=function(t){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),sessionStorage.setItem(o.PHX_LV_LATENCY_SIM,t)},t.prototype.disableLatencySim=function(){sessionStorage.removeItem(o.PHX_LV_LATENCY_SIM)},t.prototype.getLatencySim=function(){var t=sessionStorage.getItem(o.PHX_LV_LATENCY_SIM);return t?parseInt(t):null},t.prototype.getSocket=function(){return this.socket},t.prototype.connect=function(){var t=this,e=function(){t.joinRootViews()&&(t.bindTopLevelEvents(),t.socket.connect())};["complete","loaded","interactive"].indexOf(document.readyState)>=0?e():document.addEventListener("DOMContentLoaded",function(){return e()})},t.prototype.disconnect=function(){this.socket.disconnect()},t.prototype.time=function(t,e){if(!this.isProfileEnabled()||!console.time)return e();console.time(t);var n=e();return console.timeEnd(t),n},t.prototype.log=function(t,n,r){if(this.viewLogger){var o=i(r(),2),s=o[0],a=o[1];this.viewLogger(t,n,s,a)}else if(this.isDebugEnabled()){var u=i(r(),2);s=u[0],a=u[1];e.debug(t,n,s,a)}},t.prototype.onChannel=function(t,e,n){var i=this;t.on(e,function(t){var e=i.getLatencySim();e?(console.log("simulating "+e+"ms of latency from server to client"),setTimeout(function(){return n(t)},e)):n(t)})},t.prototype.wrapPush=function(t){var e=this.getLatencySim();if(!e)return t();console.log("simulating "+e+"ms of latency from client to server");var n={receives:[],receive:function(t,e){this.receives.push([t,e])}};return setTimeout(function(){n.receives.reduce(function(t,e){var n=i(e,2),r=n[0],o=n[1];return t.receive(r,o)},t())},e),n},t.prototype.reloadWithJitter=function(t){var e=this;this.disconnect();var n=i(o.RELOAD_JITTER,2),r=n[0],a=n[1],u=Math.floor(Math.random()*(a-r+1))+r,c=s.Browser.updateLocal(t.name(),o.CONSECUTIVE_RELOADS,0,function(t){return t+1});this.log(t,"join",function(){return["encountered "+c+" consecutive reloads"]}),c>o.MAX_RELOADS&&(this.log(t,"join",function(){return["exceeded "+o.MAX_RELOADS+" consecutive reloads. Entering failsafe mode"]}),u=o.FAILSAFE_JITTER),setTimeout(function(){e.hasPendingLink()?window.location=e.pendingLink:window.location.reload()},u)},t.prototype.getHookCallbacks=function(t){return this.hooks[t]},t.prototype.isUnloaded=function(){return this.unloaded},t.prototype.isConnected=function(){return this.socket.isConnected()},t.prototype.getBindingPrefix=function(){return this.bindingPrefix},t.prototype.binding=function(t){return""+this.getBindingPrefix()+t},t.prototype.channel=function(t,e){return this.socket.channel(t,e)},t.prototype.joinRootViews=function(){var t=this,e=!1;return u.DOM.each(document,o.PHX_VIEW_SELECTOR+":not(["+o.PHX_PARENT_ID+"])",function(n){var i=t.joinRootView(n,t.getHref());t.root=t.root||i,n.getAttribute(o.PHX_MAIN)&&(t.main=i),e=!0}),e},t.prototype.redirect=function(t,e){this.disconnect(),s.Browser.redirect(t,e)},t.prototype.replaceMain=function(t,e,n,i){var r=this;void 0===n&&(n=null),void 0===i&&(i=this.setPendingLink(t));var o=this.main.el;this.main.destroy(),this.main.showLoader(this.loaderTimeout),s.Browser.fetchPage(t,function(s,a){if(200!==s)return r.redirect(t);var u=document.createElement("template");u.innerHTML=a;var c=u.content.childNodes[0];if(!c||!r.isPhxView(c))return r.redirect(t);r.joinRootView(c,t,e,function(t,e){1===e&&(r.commitPendingLink(i)?(o.replaceWith(t.el),r.main=t,n&&n()):t.destroy())})})},t.prototype.isPhxView=function(t){return t.getAttribute&&null!==t.getAttribute(o.PHX_VIEW)},t.prototype.joinRootView=function(t,e,n,i){var r=new c.View(t,this,null,e,n);return this.roots[r.id]=r,r.join(i),r},t.prototype.owner=function(t,e){var n=this,i=a.maybe(t.closest(o.PHX_VIEW_SELECTOR),function(t){return n.getViewByEl(t)});i&&e(i)},t.prototype.withinTargets=function(t,e,n){var i=this;if(/^(0|[1-9](\d?)+)$/.test(e)){var r=t;if(!r)throw new Error("no phx-target's found matching @myself of "+e);this.owner(r,function(t){return n(t,r)})}else{var o=Array.from(document.querySelectorAll(e));if(0===o.length)throw new Error("no phx-target's found for selector \""+e+'"');o.forEach(function(t){i.owner(t,function(e){return n(e,t)})})}},t.prototype.withinOwners=function(t,e){var n=t.getAttribute(this.binding("target"));null===n?this.owner(t,function(n){return e(n,t)}):this.withinTargets(t,n,e)},t.prototype.getViewByEl=function(t){var e=t.getAttribute(o.PHX_ROOT_ID);return this.getRootById(e).getDescendentByEl(t)},t.prototype.getRootById=function(t){return this.roots[t]},t.prototype.onViewError=function(t){this.dropActiveElement(t)},t.prototype.destroyAllViews=function(){for(var t in this.roots)this.roots[t].destroy(),delete this.roots[t]},t.prototype.destroyViewByEl=function(t){this.getRootById(t.getAttribute(o.PHX_ROOT_ID)).destroyDescendent(t.id)},t.prototype.setActiveElement=function(t){var e=this;if(this.activeElement!==t){this.activeElement=t;var n=function(){t===e.activeElement&&(e.activeElement=null),t.removeEventListener("mouseup",e),t.removeEventListener("touchend",e)};t.addEventListener("mouseup",n),t.addEventListener("touchend",n)}},t.prototype.getActiveElement=function(){return document.activeElement===document.body&&this.activeElement||document.activeElement},t.prototype.dropActiveElement=function(t){this.prevActive&&t.ownsElement(this.prevActive)&&(this.prevActive=null)},t.prototype.restorePreviouslyActiveFocus=function(){var t;this.prevActive!==document.body&&(null===(t=this.prevActive)||void 0===t||t.focus())},t.prototype.blurActiveElement=function(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()},t.prototype.bindTopLevelEvents=function(){var t=this;this.bindClicks(),this.bindNav(),this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},function(e,n,i,r,s,a,u){var c=r.getAttribute(t.binding(o.PHX_KEY));c&&c.toLowerCase()!==e.key.toLowerCase()||i.pushKey(r,s,n,a,{altGraphKey:e.altGraphKey,altKey:e.altKey,code:e.code,ctrlKey:e.ctrlKey,key:e.key,keyIdentifier:e.keyIdentifier,keyLocation:e.keyLocation,location:e.location,metaKey:e.metaKey,repeat:e.repeat,shiftKey:e.shiftKey})}),this.bind({blur:"focusout",focus:"focusin"},function(t,e,n,i,r,o,s){s||n.pushEvent(e,i,r,o,{type:e})}),this.bind({blur:"blur",focus:"focus"},function(t,e,n,i,r,o,s){(null!==s&&void 0!==s?s:"window"!==s)&&n.pushEvent(e,i,r,o,{type:t.type})})},t.prototype.setPendingLink=function(t){return this.linkRef++,this.pendingLink=t,this.linkRef},t.prototype.commitPendingLink=function(t){return this.linkRef===t&&(this.href=this.pendingLink,this.pendingLink=null,!0)},t.prototype.getHref=function(){return this.href},t.prototype.hasPendingLink=function(){return!!this.pendingLink},t.prototype.bind=function(t,e){var n=this;Object.keys(t).forEach(function(i){var r=t[i];n.on(r,function(t){var r=n.binding(i),o=n.binding("window-"+i),s=t.target.getAttribute&&t.target.getAttribute(r);s?n.debounce(t.target,t,function(){n.withinOwners(t.target,function(n,r){e(t,i,n,t.target,r,s,null)})}):u.DOM.each(document,"["+o+"]",function(r){var s=r.getAttribute(o);n.debounce(r,t,function(){n.withinOwners(r,function(n,o){e(t,i,n,r,o,s,"window")})})})})})},t.prototype.bindClicks=function(){var t=this;[!0,!1].forEach(function(e){var n=e?t.binding("capture-click"):t.binding("click");window.addEventListener("click",function(i){var r=null,o=(r=e?i.target.matches("["+n+"]")?i.target:i.target.querySelector("["+n+"]"):a.closestPhxBinding(i.target,n))&&r.getAttribute(n);if(o){"#"===r.getAttribute("href")&&i.preventDefault();var s={altKey:i.altKey,shiftKey:i.shiftKey,ctrlKey:i.ctrlKey,metaKey:i.metaKey,x:i.x||i.clientX,y:i.y||i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,offsetX:i.offsetX,offsetY:i.offsetY,detail:i.detail||1};t.debounce(r,i,function(){t.withinOwners(r,function(t,e){t.pushEvent("click",r,e,o,s)})})}},e)})},t.prototype.bindNav=function(){var t=this;s.Browser.canPushState()&&(window.onpopstate=function(e){if(t.registerNewLocation(window.location)){var n=e.state||{},i=n.type,r=n.id,o=n.root,s=window.location.href;t.main.isConnected()&&"patch"===i&&r===t.main.id?t.main.pushLinkPatch(s,null):t.replaceMain(s,null,function(){o&&t.replaceRootHistory()})}},window.addEventListener("click",function(e){var n=a.closestPhxBinding(e.target,o.PHX_LIVE_LINK),i=n&&n.getAttribute(o.PHX_LIVE_LINK),r=e.metaKey||e.ctrlKey||1===e.button;if(i&&t.isConnected()&&t.main&&!r){var s=n.href,u=n.getAttribute(o.PHX_LINK_STATE);if(e.preventDefault(),t.pendingLink!==s)if("patch"===i)t.pushHistoryPatch(s,u,n);else{if("redirect"!==i)throw new Error("expected "+o.PHX_LIVE_LINK+' to be "patch" or "redirect", got: '+i);t.historyRedirect(s,u)}}},!1))},t.prototype.withPageLoading=function(t,e){u.DOM.dispatchEvent(window,"phx:page-loading-start",t);var n=function(){return u.DOM.dispatchEvent(window,"phx:page-loading-stop",t)};return e?e(n):n},t.prototype.pushHistoryPatch=function(t,e,n){var i=this;this.withPageLoading({to:t,kind:"patch"},function(r){i.main.pushLinkPatch(t,n,function(){i.historyPatch(t,e),r()})})},t.prototype.historyPatch=function(t,e){s.Browser.pushState(e,{type:"patch",id:this.main.id},t),this.registerNewLocation(window.location)},t.prototype.historyRedirect=function(t,e,n){var i=this;this.withPageLoading({to:t,kind:"redirect"},function(r){i.replaceMain(t,n,function(){s.Browser.pushState(e,{type:"redirect",id:i.main.id},t),i.registerNewLocation(window.location),r()})})},t.prototype.replaceRootHistory=function(){s.Browser.pushState("replace",{root:!0,type:"patch",id:this.main.id})},t.prototype.registerNewLocation=function(t){var e=this.currentLocation;return e.pathname+e.search!==t.pathname+t.search&&(this.currentLocation=a.clone(t),!0)},t.prototype.bindForms=function(){var t,e,n=this,i=0;this.on("submit",function(t){var e=t.target.getAttribute(n.binding("submit"));e&&(t.preventDefault(),t.target.disabled=!0,n.withinOwners(t.target,function(n,i){return n.submitForm(t.target,i,e)}))});var s=function(t){a.on(t,function(e){var r=e.target,s=r.form&&r.form.getAttribute(n.binding("change"));if(s&&("number"!==r.type||!r.validity||!r.validity.badInput)){var a=i;i++;var c=u.DOM.private(r,"prev-iteration")||{},d=c.at,l=c.type;d===a-1&&t!==l||(u.DOM.putPrivate(r,"prev-iteration",{at:a,type:t}),n.debounce(r,e,function(){n.withinOwners(r.form,function(t,i){u.DOM.isTextualInput(r)?u.DOM.putPrivate(r,o.PHX_HAS_FOCUSED,!0):n.setActiveElement(r),t.pushInput(r,i,s,e.target)})}))}})},a=this;try{for(var c=r(["change","input"]),d=c.next();!d.done;d=c.next()){s(d.value)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}},t.prototype.debounce=function(t,e,n){var i=this.binding(o.PHX_DEBOUNCE),r=this.binding(o.PHX_THROTTLE),s=this.defaults.debounce.toString(),a=this.defaults.throttle.toString();u.DOM.debounce(t,e,i,s,r,a,n)},t.prototype.silenceEvents=function(t){this.silenced=!0,t(),this.silenced=!1},t.prototype.on=function(t,e){var n=this;window.addEventListener(t,function(t){n.silenced||e(t)})},t}();e.LiveSocket=d,e.default=d}])});
//# sourceMappingURL=phoenix_live_view.js.map
